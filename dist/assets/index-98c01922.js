var br=Object.defineProperty,vr=Object.defineProperties;var wr=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var ms=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable;var us=(n,t,s)=>t in n?br(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,P=(n,t)=>{for(var s in t||(t={}))ms.call(t,s)&&us(n,s,t[s]);if(ct)for(var s of ct(t))gs.call(t,s)&&us(n,s,t[s]);return n},O=(n,t)=>vr(n,wr(t));var St=(n,t)=>{var s={};for(var r in n)ms.call(n,r)&&t.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&ct)for(var r of ct(n))t.indexOf(r)<0&&gs.call(n,r)&&(s[r]=n[r]);return s};var jr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var g=(n,t,s)=>new Promise((r,a)=>{var i=c=>{try{l(s.next(c))}catch(h){a(h)}},o=c=>{try{l(s.throw(c))}catch(h){a(h)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,o);l((s=s.apply(n,t)).next())});import{r as C,a as Nr,g as _r,c as oe,R as kr}from"./vendor-2a97f0fd.js";var qo=jr(H=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Ws={exports:{}},bt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=C,Cr=Symbol.for("react.element"),Tr=Symbol.for("react.fragment"),Pr=Object.prototype.hasOwnProperty,Or=Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Er={key:!0,ref:!0,__self:!0,__source:!0};function Vs(n,t,s){var r,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Pr.call(t,r)&&!Er.hasOwnProperty(r)&&(a[r]=t[r]);if(n&&n.defaultProps)for(r in t=n.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Cr,type:n,key:i,ref:o,props:a,_owner:Or.current}}bt.Fragment=Tr;bt.jsx=Vs;bt.jsxs=Vs;Ws.exports=bt;var e=Ws.exports,Wt={},fs=Nr;Wt.createRoot=fs.createRoot,Wt.hydrateRoot=fs.hydrateRoot;const $r=C.createContext(null),Ct={didCatch:!1,error:null};class Tt extends C.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ct}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var s,r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(s=(r=this.props).onReset)===null||s===void 0||s.call(r,{args:i,reason:"imperative-api"}),this.setState(Ct)}}componentDidCatch(t,s){var r,a;(r=(a=this.props).onError)===null||r===void 0||r.call(a,t,s)}componentDidUpdate(t,s){const{didCatch:r}=this.state,{resetKeys:a}=this.props;if(r&&s.error!==null&&Ar(t.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(Ct)}}render(){const{children:t,fallbackRender:s,FallbackComponent:r,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let l=t;if(i){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof s=="function")l=s(c);else if(r)l=C.createElement(r,c);else if(a!==void 0)l=a;else throw o}return C.createElement($r.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}function Ar(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==t.length||n.some((s,r)=>!Object.is(s,t[r]))}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ir=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,r)=>r?r.toUpperCase():s.toLowerCase()),ps=n=>{const t=Ir(n);return t.charAt(0).toUpperCase()+t.slice(1)},zs=(...n)=>n.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim(),Ur=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=C.forwardRef((h,c)=>{var d=h,{color:n="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o}=d,l=St(d,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return C.createElement("svg",P(P(O(P({ref:c},Dr),{width:t,height:t,stroke:n,strokeWidth:r?Number(s)*24/Number(t):s,className:zs("lucide",a)}),!i&&!Ur(l)&&{"aria-hidden":"true"}),l),[...o.map(([u,x])=>C.createElement(u,x)),...Array.isArray(i)?i:[i]])});/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=(n,t)=>{const s=C.forwardRef((o,i)=>{var l=o,{className:r}=l,a=St(l,["className"]);return C.createElement(Lr,P({ref:i,iconNode:t,className:zs(`lucide-${Rr(ps(n))}`,`lucide-${n}`,r)},a))});return s.displayName=ps(n),s};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Pt=A("archive",Mr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qr=A("arrow-right",Fr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],Wr=A("arrow-up-narrow-wide",Br);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],st=A("award",Vr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vt=A("book-open",zr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Ot=A("calculator",Hr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gt=A("calendar",Gr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],xs=A("chart-column",Jr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hs=A("circle-alert",Kr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ie=A("circle-check-big",Yr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zt=A("clock",Qr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ht=A("copy",Zr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ea=A("credit-card",Xr);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],sa=A("crown",ta);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ie=A("dollar-sign",ra);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],na=A("download",aa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],oa=A("external-link",ia);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ca=A("eye-off",la);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gs=A("eye",da);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ua=A("file-text",ha);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ga=A("key",ma);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ys=A("layout-dashboard",fa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Et=A("library",pa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ya=A("list-filter",xa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bs=A("loader-circle",ba);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],wa=A("log-in",va);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Na=A("log-out",ja);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ka=A("message-square",_a);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ca=A("minus",Sa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],He=A("package",Ta);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Oa=A("pen",Pa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],vs=A("play",Ea);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Re=A("plus",$a);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ws=A("receipt",Aa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ns=A("save",Ra);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ft=A("search",Ia);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],is=A("settings",Ua);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Js=A("shield",Da);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],be=A("shopping-cart",La);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],js=A("smartphone",Ma);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$t=A("star",Fa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ae=A("target",qa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ze=A("trash-2",Ba);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],me=A("trending-up",Wa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Gt=A("triangle-alert",Va);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],At=A("upload",za);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ga=A("user-plus",Ha);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ns=A("user",Ja);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ve=A("users",Ka);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pt=A("x",Ya),Qa="modulepreload",Za=function(n){return"/"+n},_s={},at=function(t,s,r){if(!s||s.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=Za(i),i in _s)return;_s[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let d=a.length-1;d>=0;d--){const u=a[d];if(u.href===i&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":Qa,o||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),o)return new Promise((d,u)=>{h.addEventListener("load",d),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Xa=n=>{let t;return n?t=n:typeof fetch=="undefined"?t=(...s)=>at(()=>Promise.resolve().then(()=>Je),void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)};class os extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class en extends os{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ks extends os{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ss extends os{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jt;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Jt||(Jt={}));var tn=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};class sn{constructor(t,{headers:s={},customFetch:r,region:a=Jt.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Xa(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var r;return tn(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const h=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob!="undefined"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData!="undefined"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(w=>{throw new en(w)}),x=u.headers.get("x-relay-error");if(x&&x==="true")throw new ks(u);if(!u.ok)throw new Ss(u);let v=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return v==="application/json"?m=yield u.json():v==="application/octet-stream"?m=yield u.blob():v==="text/event-stream"?m=u:v==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null,response:u}}catch(a){return{data:null,error:a,response:a instanceof Ss||a instanceof ks?a.context:void 0}}})}}var ne={},ls={},vt={},nt={},wt={},jt={},rn=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},Ge=rn();const an=Ge.fetch,Ks=Ge.fetch.bind(Ge),Ys=Ge.Headers,nn=Ge.Request,on=Ge.Response,Je=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ys,Request:nn,Response:on,default:Ks,fetch:an},Symbol.toStringTag,{value:"Module"})),ln=_r(Je);var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});let cn=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Nt.default=cn;var Qs=oe&&oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jt,"__esModule",{value:!0});const dn=Qs(ln),hn=Qs(Nt);let un=class{constructor(t){var s,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(s=t.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch=="undefined"?this.fetch=dn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=new Headers(this.headers),this.headers.set(t,s),this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>g(this,null,function*(){var o,l,c,h;let d=null,u=null,x=null,v=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const T=yield i.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),b=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&b&&b.length>1&&(x=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,x=null,v=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=yield i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(u=[],d=null,v=200,m="OK")}catch(b){i.status===404&&y===""?(v=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((h=d==null?void 0:d.details)===null||h===void 0)&&h.includes("0 rows"))&&(d=null,v=200,m="OK"),d&&this.shouldThrowOnError)throw new hn.default(d)}return{error:d,data:u,count:x,status:v,statusText:m}}));return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}returns(){return this}overrideTypes(){return this}};jt.default=un;var mn=oe&&oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wt,"__esModule",{value:!0});const gn=mn(jt);let fn=class extends gn.default{select(t){let s=!1;const r=(t!=null?t:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:s=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:r=s}={}){const a=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a=="undefined"?"offset":`${a}.offset`,o=typeof a=="undefined"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:s=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};wt.default=fn;var pn=oe&&oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nt,"__esModule",{value:!0});const xn=pn(wt);let yn=class extends xn.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const r=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(t,s,r){return this.url.searchParams.append(t,`not.${s}.${r}`),this}or(t,{foreignTable:s,referencedTable:r=s}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,r){return this.url.searchParams.append(t,`${s}.${r}`),this}};nt.default=yn;var bn=oe&&oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vt,"__esModule",{value:!0});const Ye=bn(nt);let vn=class{constructor(t,{headers:s={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(s),this.schema=r,this.fetch=a}select(t,{head:s=!1,count:r}={}){const a=s?"HEAD":"GET";let i=!1;const o=(t!=null?t:"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Ye.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:s,defaultToNull:r=!0}={}){var a;const i="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ye.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:s,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(c.length>0){const h=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new Ye.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:s}={}){var r;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new Ye.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var s;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ye.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};vt.default=vn;var Zs=oe&&oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ls,"__esModule",{value:!0});const wn=Zs(vt),jn=Zs(nt);let Nn=class Xs{constructor(t,{headers:s={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(s),this.schemaName=r,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new wn.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Xs(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let h;r||a?(l=r?"HEAD":"GET",Object.entries(s).filter(([u,x])=>x!==void 0).map(([u,x])=>[u,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([u,x])=>{c.searchParams.append(u,x)})):(l="POST",h=s);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new jn.default({method:l,url:c,headers:d,schema:this.schemaName,body:h,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ls.default=Nn;var Ke=oe&&oe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ne,"__esModule",{value:!0});ne.PostgrestError=ne.PostgrestBuilder=ne.PostgrestTransformBuilder=ne.PostgrestFilterBuilder=ne.PostgrestQueryBuilder=ne.PostgrestClient=void 0;const er=Ke(ls);ne.PostgrestClient=er.default;const tr=Ke(vt);ne.PostgrestQueryBuilder=tr.default;const sr=Ke(nt);ne.PostgrestFilterBuilder=sr.default;const rr=Ke(wt);ne.PostgrestTransformBuilder=rr.default;const ar=Ke(jt);ne.PostgrestBuilder=ar.default;const nr=Ke(Nt);ne.PostgrestError=nr.default;var _n=ne.default={PostgrestClient:er.default,PostgrestQueryBuilder:tr.default,PostgrestFilterBuilder:sr.default,PostgrestTransformBuilder:rr.default,PostgrestBuilder:ar.default,PostgrestError:nr.default};const{PostgrestClient:kn,PostgrestQueryBuilder:Ko,PostgrestFilterBuilder:Yo,PostgrestTransformBuilder:Qo,PostgrestBuilder:Zo,PostgrestError:Xo}=_n;class Sn{static detectEnvironment(){var t;if(typeof WebSocket!="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocket!="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!="undefined"&&typeof global.WebSocket!="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocketPair!="undefined"&&typeof globalThis.WebSocket=="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!="undefined"&&globalThis.EdgeRuntime||typeof navigator!="undefined"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process!="undefined"){const s=process.versions;if(s&&s.node){const r=s.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket!="undefined"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const r=this.getWebSocketConstructor();return new r(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch(t){return!1}}}const Cn="2.15.5",Tn=`realtime-js/${Cn}`,Pn="1.0.0",Kt=1e4,On=1e3,En=100;var Xe;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Xe||(Xe={}));var Z;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Z||(Z={}));var ce;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ce||(ce={}));var Yt;(function(n){n.websocket="websocket"})(Yt||(Yt={}));var $e;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})($e||($e={}));class $n{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,s,r)}_decodeBroadcast(t,s,r){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const h=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class ir{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(K||(K={}));const Cs=(n,t,s={})=>{var r;const a=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=An(o,n,t,a),i),{})},An=(n,t,s,r)=>{const a=t.find(l=>l.name===n),i=a==null?void 0:a.type,o=s[n];return i&&!r.includes(i)?or(i,o):Qt(o)},or=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return Dn(t,s)}switch(n){case K.bool:return Rn(t);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return In(t);case K.json:case K.jsonb:return Un(t);case K.timestamp:return Ln(t);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return Qt(t);default:return Qt(t)}},Qt=n=>n,Rn=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},In=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Un=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},Dn=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,r=n[s];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,s);try{i=JSON.parse("["+o+"]")}catch(l){i=o?o.split(","):[]}return i.map(l=>or(t,l))}return n},Ln=n=>typeof n=="string"?n.replace(" ","T"):n,lr=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Rt{constructor(t,s,r={},a=Kt){this.channel=t,this.event=s,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ts;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ts||(Ts={}));class et{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=et.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=et.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=et.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,a){const i=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(i,(h,d)=>{o[h]||(c[h]=d)}),this.map(o,(h,d)=>{const u=i[h];if(u){const x=d.map(y=>y.presence_ref),v=u.map(y=>y.presence_ref),m=d.filter(y=>v.indexOf(y.presence_ref)<0),w=u.filter(y=>x.indexOf(y.presence_ref)<0);m.length>0&&(l[h]=m),w.length>0&&(c[h]=w)}else l[h]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,s,r,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var h;const d=(h=t[l])!==null&&h!==void 0?h:[];if(t[l]=this.cloneDeep(c),d.length>0){const u=t[l].map(v=>v.presence_ref),x=d.filter(v=>u.indexOf(v.presence_ref)<0);t[l].unshift(...x)}r(l,d,c)}),this.map(o,(l,c)=>{let h=t[l];if(!h)return;const d=c.map(u=>u.presence_ref);h=h.filter(u=>d.indexOf(u.presence_ref)<0),t[l]=h,a(l,h,c),h.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const a=t[r];return"metas"in a?s[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ps;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Ps||(Ps={}));var tt;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(tt||(tt={}));var ye;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ye||(ye={}));class cs{constructor(t,s={config:{}},r){this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Rt(this,ce.join,this.params,this.timeout),this.rejoinTimer=new ir(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ce.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new et(this),this.broadcastEndpointURL=lr(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Z.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,h=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[tt.PRESENCE]&&this.bindings[tt.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,u={},x={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(ye.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(ye.CLOSED)),this.updateJoinPayload(Object.assign({config:x},u)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",m=>g(this,[m],function*({postgres_changes:v}){var w;if(this.socket.setAuth(),v===void 0){t==null||t(ye.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(w=y==null?void 0:y.length)!==null&&w!==void 0?w:0,T=[];for(let k=0;k<b;k++){const E=y[k],{filter:{event:U,schema:M,table:R,filter:ae}}=E,ee=v&&v[k];if(ee&&ee.event===U&&ee.schema===M&&ee.table===R&&ee.filter===ae)T.push(Object.assign(Object.assign({},E),{id:ee.id}));else{this.unsubscribe(),this.state=Z.errored,t==null||t(ye.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(ye.SUBSCRIBED);return}})).receive("error",v=>{this.state=Z.errored,t==null||t(ye.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ye.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return g(this,arguments,function*(t,s={}){return yield this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)})}untrack(){return g(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,s,r){return this.state===Z.joined&&t===tt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,r)}send(r){return g(this,arguments,function*(t,s={}){var a,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const d=yield this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return yield(i=d.body)===null||i===void 0?void 0:i.cancel(),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,h;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Z.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ce.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Rt(this,ce.leave,{},t),r.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Z.closed,this.bindings={}}_fetchWithTimeout(t,s,r){return g(this,null,function*(){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o})}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Rt(this,t,s,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>En){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:h,join:d}=ce;if(r&&[l,c,h,d].indexOf(o)>=0&&r!==this._joinRef())return;let x=this._onMessage(o,s,r);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var m,w,y;return((m=v.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(w=v.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(v=>v.callback(x,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var m,w,y,b,T,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const E=v.id,U=(m=v.filter)===null||m===void 0?void 0:m.event;return E&&((w=s.ids)===null||w===void 0?void 0:w.includes(E))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((y=s.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(T=(b=v==null?void 0:v.filter)===null||b===void 0?void 0:b.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((k=s==null?void 0:s.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof x=="object"&&"ids"in x){const m=x.data,{schema:w,table:y,commit_timestamp:b,type:T,errors:k}=m;x=Object.assign(Object.assign({},{schema:w,table:y,commit_timestamp:b,eventType:T,new:{},old:{},errors:k}),this._getPayloadRecords(m))}v.callback(x,r)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&cs.isEqual(a.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ce.close,{},t)}_onError(t){this._on(ce.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Cs(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Cs(t.columns,t.old_record)),s}}const It=()=>{},dt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Mn=[1e3,2e3,5e3,1e4],Fn=1e4,qn=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Bn{constructor(t,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kt,this.transport=null,this.heartbeatIntervalMs=dt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=It,this.ref=0,this.reconnectTimer=null,this.logger=It,this.conn=null,this.sendBuffer=[],this.serializer=new $n,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch=="undefined"?i=(...o)=>at(()=>Promise.resolve().then(()=>Je),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${Yt.websocket}`,this.httpEndpoint=lr(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sn.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,s!=null?s:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return g(this,null,function*(){const s=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),s})}removeAllChannels(){return g(this,null,function*(){const t=yield Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Xe.connecting:return $e.Connecting;case Xe.open:return $e.Open;case Xe.closing:return $e.Closing;default:return $e.Closed}}isConnected(){return this.connectionState()===$e.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new cs(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return g(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return g(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(On,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},dt.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=s,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(a,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ce.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${r}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const r=new Blob([qn],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}_performAuth(t=null){return g(this,null,function*(){let s;t?s=t:this.accessToken?s=yield this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const a={access_token:s,version:Tn};s&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(ce.access_token,{access_token:s})}))})}_waitForAuthIfNeeded(){return g(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(s)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ir(()=>g(this,null,function*(){setTimeout(()=>g(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),dt.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var s,r,a,i,o,l,c,h,d;if(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Kt,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:dt.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:It,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:u=>Mn[u-1]||Fn,this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(u,x)=>x(JSON.stringify(u)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ds extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function X(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Wn extends ds{constructor(t,s,r){super(t),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zt extends ds{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Vn=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};const cr=n=>{let t;return n?t=n:typeof fetch=="undefined"?t=(...s)=>at(()=>Promise.resolve().then(()=>Je),void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},zn=()=>Vn(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield at(()=>Promise.resolve().then(()=>Je),void 0)).Response:Response}),Xt=n=>{if(Array.isArray(n))return n.map(s=>Xt(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,r])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Xt(r)}),t},Hn=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ue=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};const Ut=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Gn=(n,t,s)=>Ue(void 0,void 0,void 0,function*(){const r=yield zn();n instanceof r&&!(s!=null&&s.noResolveJson)?n.json().then(a=>{const i=n.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new Wn(Ut(a),i,o))}).catch(a=>{t(new Zt(Ut(a),a))}):t(new Zt(Ut(n),n))}),Jn=(n,t,s,r)=>{const a={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||!r?a:(Hn(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),s))};function it(n,t,s,r,a,i){return Ue(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(s,Jn(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Gn(c,l,r))})})}function xt(n,t,s,r){return Ue(this,void 0,void 0,function*(){return it(n,"GET",t,s,r)})}function ue(n,t,s,r,a){return Ue(this,void 0,void 0,function*(){return it(n,"POST",t,r,a,s)})}function es(n,t,s,r,a){return Ue(this,void 0,void 0,function*(){return it(n,"PUT",t,r,a,s)})}function Kn(n,t,s,r){return Ue(this,void 0,void 0,function*(){return it(n,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function dr(n,t,s,r,a){return Ue(this,void 0,void 0,function*(){return it(n,"DELETE",t,r,a,s)})}var re=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};const Yn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Os={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qn{constructor(t,s={},r,a){this.url=t,this.headers=s,this.bucketId=r,this.fetch=cr(a)}uploadOrUpdate(t,s,r,a){return re(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Os),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob!="undefined"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const h=this._removeEmptyFolders(s),d=this._getFinalPath(h),u=yield(t=="PUT"?es:ue)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}upload(t,s,r){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,r)})}uploadToSignedUrl(t,s,r,a){return re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const h=Object.assign({upsert:Os.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob!="undefined"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType);const u=yield es(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:u.Key},error:null}}catch(c){if(X(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return re(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield ue(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ds("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}update(t,s,r){return re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,r)})}move(t,s,r){return re(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}copy(t,s,r){return re(this,void 0,void 0,function*(){try{return{data:{path:(yield ue(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,r){return re(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ue(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,r){return re(this,void 0,void 0,function*(){try{const a=yield ue(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}download(t,s){return re(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)!="undefined"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield xt(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(X(l))return{data:null,error:l};throw l}})}info(t){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const r=yield xt(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Xt(r),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}exists(t){return re(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Kn(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(X(r)&&r instanceof Zt){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,s){const r=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const l=typeof(s==null?void 0:s.transform)!="undefined"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(t){return re(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}})}list(t,s,r){return re(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Yn),s),{prefix:t||""});return{data:yield ue(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}listV2(t,s){return re(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ue(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer!="undefined"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const Zn="2.11.1",Xn={"X-Client-Info":`storage-js/${Zn}`};var Me=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};class ei{constructor(t,s={},r,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Xn),s),this.fetch=cr(r)}listBuckets(){return Me(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}getBucket(t){return Me(this,void 0,void 0,function*(){try{return{data:yield xt(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Me(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}updateBucket(t,s){return Me(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Me(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Me(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}})}}class ti extends ei{constructor(t,s={},r,a){super(t,s,r,a)}from(t){return new Qn(this.url,this.headers,t,this.fetch)}}const si="2.57.2";let Qe="";typeof Deno!="undefined"?Qe="deno":typeof document!="undefined"?Qe="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?Qe="react-native":Qe="node";const ri={"X-Client-Info":`supabase-js-${Qe}/${si}`},ai={headers:ri},ni={schema:"public"},ii={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oi={};var li=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};const ci=n=>{let t;return n?t=n:typeof fetch=="undefined"?t=Ks:t=fetch,(...s)=>t(...s)},di=()=>typeof Headers=="undefined"?Ys:Headers,hi=(n,t,s)=>{const r=ci(s),a=di();return(i,o)=>li(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:n;let h=new a(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:h}))})};var ui=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};function mi(n){return n.endsWith("/")?n:n+"/"}function gi(n,t){var s,r;const{db:a,auth:i,realtime:o,global:l}=n,{db:c,auth:h,realtime:d,global:u}=t,x={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ui(this,void 0,void 0,function*(){return""})};return n.accessToken?x.accessToken=n.accessToken:delete x.accessToken,x}const hr="2.71.1",Ve=30*1e3,ts=3,Dt=ts*Ve,fi="http://localhost:9999",pi="supabase.auth.token",xi={"X-Client-Info":`gotrue-js/${hr}`},ss="X-Supabase-Api-Version",ur={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yi=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bi=10*60*1e3;class hs extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function D(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class vi extends hs{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function wi(n){return D(n)&&n.name==="AuthApiError"}class mr extends hs{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Se extends hs{constructor(t,s,r,a){super(t,r,a),this.name=s,this.status=r}}class _e extends Se{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ji(n){return D(n)&&n.name==="AuthSessionMissingError"}class ht extends Se{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ut extends Se{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class mt extends Se{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ni(n){return D(n)&&n.name==="AuthImplicitGrantRedirectError"}class Es extends Se{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rs extends Se{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Lt(n){return D(n)&&n.name==="AuthRetryableFetchError"}class $s extends Se{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class as extends Se{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),As=` 	
\r=`.split(""),_i=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<As.length;t+=1)n[As[t].charCodeAt(0)]=-2;for(let t=0;t<yt.length;t+=1)n[yt[t].charCodeAt(0)]=t;return n})();function Rs(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(yt[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(yt[r]),t.queuedBits-=6}}function gr(n,t,s){const r=_i[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Is(n){const t=[],s=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Ci(o,r,s)};for(let o=0;o<n.length;o+=1)gr(n.charCodeAt(o),a,i);return t.join("")}function ki(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Si(n,t){for(let s=0;s<n.length;s+=1){let r=n.charCodeAt(s);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(n.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}ki(r,t)}}function Ci(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Ti(n){const t=[],s={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<n.length;a+=1)gr(n.charCodeAt(a),s,r);return new Uint8Array(t)}function Pi(n){const t=[];return Si(n,s=>t.push(s)),new Uint8Array(t)}function Oi(n){const t=[],s={queue:0,queuedBits:0},r=a=>{t.push(a)};return n.forEach(a=>Rs(a,s,r)),Rs(null,s,r),t.join("")}function Ei(n){return Math.round(Date.now()/1e3)+n}function $i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}const le=()=>typeof window!="undefined"&&typeof document!="undefined",Te={tested:!1,writable:!1},fr=()=>{if(!le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(t){return!1}if(Te.tested)return Te.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Te.tested=!0,Te.writable=!0}catch(t){Te.tested=!0,Te.writable=!1}return Te.writable};function Ai(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch(r){}return s.searchParams.forEach((r,a)=>{t[a]=r}),t}const pr=n=>{let t;return n?t=n:typeof fetch=="undefined"?t=(...s)=>at(()=>Promise.resolve().then(()=>Je),void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},Ri=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ze=(n,t,s)=>g(H,null,function*(){yield n.setItem(t,JSON.stringify(s))}),Pe=(n,t)=>g(H,null,function*(){const s=yield n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}}),Ne=(n,t)=>g(H,null,function*(){yield n.removeItem(t)});class _t{constructor(){this.promise=new _t.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}_t.promiseConstructor=Promise;function Mt(n){const t=n.split(".");if(t.length!==3)throw new as("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yi.test(t[r]))throw new as("JWT not in base64url format");return{header:JSON.parse(Is(t[0])),payload:JSON.parse(Is(t[1])),signature:Ti(t[2]),raw:{header:t[0],payload:t[1]}}}function Ii(n){return g(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function Ui(n,t){return new Promise((r,a)=>{g(this,null,function*(){for(let i=0;i<1/0;i++)try{const o=yield n(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})})}function Di(n){return("0"+n.toString(16)).substr(-2)}function Li(){const t=new Uint32Array(56);if(typeof crypto=="undefined"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,Di).join("")}function Mi(n){return g(this,null,function*(){const s=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")})}function Fi(n){return g(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=yield Mi(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Fe(n,t,s=!1){return g(this,null,function*(){const r=Li();let a=r;s&&(a+="/PASSWORD_RECOVERY"),yield ze(n,`${t}-code-verifier`,a);const i=yield Fi(r);return[i,r===i?"plain":"s256"]})}const qi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bi(n){const t=n.headers.get(ss);if(!t||!t.match(qi))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(s){return null}}function Wi(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function Vi(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zi=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qe(n){if(!zi.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ft(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Us(n){return JSON.parse(JSON.stringify(n))}var Hi=globalThis&&globalThis.__rest||function(n,t){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(s[r[a]]=n[r[a]]);return s};const Ee=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Gi=[502,503,504];function Ds(n){return g(this,null,function*(){var t;if(!Ri(n))throw new rs(Ee(n),0);if(Gi.includes(n.status))throw new rs(Ee(n),n.status);let s;try{s=yield n.json()}catch(i){throw new mr(Ee(i),i)}let r;const a=Bi(n);if(a&&a.getTime()>=ur["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new $s(Ee(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new _e}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $s(Ee(s),n.status,s.weak_password.reasons);throw new vi(Ee(s),n.status||500,r)})}const Ji=(n,t,s,r)=>{const a={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};function F(n,t,s,r){return g(this,null,function*(){var a;const i=Object.assign({},r==null?void 0:r.headers);i[ss]||(i[ss]=ur["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield Ki(n,t,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}})}function Ki(n,t,s,r,a,i){return g(this,null,function*(){const o=Ji(t,r,a,i);let l;try{l=yield n(s,Object.assign({},o))}catch(c){throw console.error(c),new rs(Ee(c),0)}if(l.ok||(yield Ds(l)),r!=null&&r.noResolveJson)return l;try{return yield l.json()}catch(c){yield Ds(c)}})}function xe(n){var t;let s=null;Xi(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=Ei(n.expires_in)));const r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:r},error:null}}function Ls(n){const t=xe(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function ke(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Yi(n){return{data:n,error:null}}function Qi(n){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i}=n,o=Hi(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Zi(n){return n}function Xi(n){return n.access_token&&n.refresh_token&&n.expires_in}const qt=["global","local","others"];var eo=globalThis&&globalThis.__rest||function(n,t){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(s[r[a]]=n[r[a]]);return s};class to{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=pr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(r){return g(this,arguments,function*(t,s=qt[0]){if(qt.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qt.join(", ")}`);try{return yield F(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}})}inviteUserByEmail(r){return g(this,arguments,function*(t,s={}){try{return yield F(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ke})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}})}generateLink(t){return g(this,null,function*(){try{const{options:s}=t,r=eo(t,["options"]),a=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),yield F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Qi,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(D(s))return{data:{properties:null,user:null},error:s};throw s}})}createUser(t){return g(this,null,function*(){try{return yield F(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ke})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}})}listUsers(t){return g(this,null,function*(){var s,r,a,i,o,l,c;try{const h={nextPage:null,lastPage:0,total:0},d=yield F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Zi});if(d.error)throw d.error;const u=yield d.json(),x=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(m=>{const w=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);h[`${y}Page`]=w}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},u),h),error:null}}catch(h){if(D(h))return{data:{users:[]},error:h};throw h}})}getUserById(t){return g(this,null,function*(){qe(t);try{return yield F(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ke})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}})}updateUserById(t,s){return g(this,null,function*(){qe(t);try{return yield F(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:ke})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,s=!1){return g(this,null,function*(){qe(t);try{return yield F(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:ke})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return g(this,null,function*(){qe(t.userId);try{const{data:s,error:r}=yield F(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:r}}catch(s){if(D(s))return{data:null,error:s};throw s}})}_deleteFactor(t){return g(this,null,function*(){qe(t.userId),qe(t.id);try{return{data:yield F(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}}function Ms(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}function so(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(n){typeof self!="undefined"&&(self.globalThis=self)}}const Be={debug:!!(globalThis&&fr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xr extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ro extends xr{}function ao(n,t,s){return g(this,null,function*(){Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Be.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},a=>g(this,null,function*(){if(a){Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return yield s()}finally{Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(t===0)throw Be.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ro(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Be.debug)try{const i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield s()}})))})}so();const no={url:fi,storageKey:pi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Fs(n,t,s){return g(this,null,function*(){return yield s()})}const We={};class rt{constructor(t){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rt.nextInstanceID,rt.nextInstanceID+=1,this.instanceID>0&&le()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},no),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new to({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=pr(a.fetch),this.lock=a.lock||Fs,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:le()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=ao:this.lock=Fs,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:fr()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ms(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ms(this.memoryStorage)),le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",i=>g(this,null,function*(){this._debug("received broadcast notification from other tab or client",i),yield this._notifyAllSubscribers(i.data.event,i.data.session,!1)}))}this.initialize()}get jwks(){var t,s;return(s=(t=We[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){We[this.storageKey]=Object.assign(Object.assign({},We[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=We[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){We[this.storageKey]=Object.assign(Object.assign({},We[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hr}) ${new Date().toISOString()}`,...t),this}initialize(){return g(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=(()=>g(this,null,function*(){return yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._initialize()}))}))(),yield this.initializePromise)})}_initialize(){return g(this,null,function*(){var t;try{const s=Ai(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":(yield this._isPKCECallback(s))&&(r="pkce"),le()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=yield this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ni(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return yield this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),yield this._saveSession(o),setTimeout(()=>g(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",o):yield this._notifyAllSubscribers("SIGNED_IN",o)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(s){return D(s)?{error:s}:{error:new mr("Unexpected error during initialization",s)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return g(this,null,function*(){var s,r,a;try{const i=yield F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:xe}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,h=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}})}signUp(t){return g(this,null,function*(){var s,r,a;try{let i;if("email"in t){const{email:d,password:u,options:x}=t;let v=null,m=null;this.flowType==="pkce"&&([v,m]=yield Fe(this.storage,this.storageKey)),i=yield F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:d,password:u,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:v,code_challenge_method:m},xform:xe})}else if("phone"in t){const{phone:d,password:u,options:x}=t;i=yield F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:u,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:xe})}else throw new ut("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,h=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(t){return g(this,null,function*(){try{let s;if("email"in t){const{email:i,password:o,options:l}=t;s=yield F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ls})}else if("phone"in t){const{phone:i,password:o,options:l}=t;s=yield F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ls})}else throw new ut("You must provide either an email or phone number and a password");const{data:r,error:a}=s;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ht}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithOAuth(t){return g(this,null,function*(){var s,r,a,i;return yield this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(t){return g(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>g(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return g(this,null,function*(){const{chain:s}=t;if(s==="solana")return yield this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)})}signInWithSolana(t){return g(this,null,function*(){var s,r,a,i,o,l,c,h,d,u,x,v;let m,w;if("message"in t)m=t.message,w=t.signature;else{const{chain:y,wallet:b,statement:T,options:k}=t;let E;if(le())if(typeof b=="object")E=b;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))E=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=b}const U=new URL((s=k==null?void 0:k.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in E&&E.signIn){const M=yield E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),T?{statement:T}:null));let R;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")R=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)R=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)m=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${U.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(a=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((u=(d=k==null?void 0:k.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||u===void 0)&&u.length?["Resources",...k.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const M=yield E.signMessage(new TextEncoder().encode(m),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=M}}try{const{data:y,error:b}=yield F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Oi(w)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:xe});if(b)throw b;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new ht}:(y.session&&(yield this._saveSession(y.session),yield this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:b})}catch(y){if(D(y))return{data:{user:null,session:null},error:y};throw y}})}_exchangeCodeForSession(t){return g(this,null,function*(){const s=yield Pe(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(s!=null?s:"").split("/");try{const{data:i,error:o}=yield F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:xe});if(yield Ne(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ht}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a!=null?a:null}),error:o})}catch(i){if(D(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}})}signInWithIdToken(t){return g(this,null,function*(){try{const{options:s,provider:r,token:a,access_token:i,nonce:o}=t,l=yield F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:xe}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ht}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithOtp(t){return g(this,null,function*(){var s,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let h=null,d=null;this.flowType==="pkce"&&([h,d]=yield Fe(this.storage,this.storageKey));const{error:u}=yield F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in t){const{phone:l,options:c}=t,{data:h,error:d}=yield F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:d}}throw new ut("You must provide either an email or phone number.")}catch(l){if(D(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(t){return g(this,null,function*(){var s,r;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=yield F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:xe});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,h=o.user;return c!=null&&c.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(a){if(D(a))return{data:{user:null,session:null},error:a};throw a}})}signInWithSSO(t){return g(this,null,function*(){var s,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=yield Fe(this.storage,this.storageKey)),yield F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Yi})}catch(i){if(D(i))return{data:null,error:i};throw i}})}reauthenticate(){return g(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return g(this,null,function*(){try{return yield this._useSession(t=>g(this,null,function*(){const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new _e;const{error:a}=yield F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}}))}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return g(this,null,function*(){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=yield F(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=yield F(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ut("You must provide either an email or phone number and a type")}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}})}getSession(){return g(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return this._useSession(s=>g(this,null,function*(){return s}))}))})}_acquireLock(t,s){return g(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(()=>g(this,null,function*(){return yield r,yield s()}))();return this.pendingInLock.push((()=>g(this,null,function*(){try{yield a}catch(i){}}))()),a}return yield this.lock(`lock:${this.storageKey}`,t,()=>g(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((()=>g(this,null,function*(){try{yield r}catch(a){}}))()),yield r;this.pendingInLock.length;){const a=[...this.pendingInLock];yield Promise.all(a),this.pendingInLock.splice(0,a.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return g(this,null,function*(){this._debug("#_useSession","begin");try{const s=yield this.__loadSession();return yield t(s)}finally{this._debug("#_useSession","end")}})}__loadSession(){return g(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=yield Pe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Dt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=yield Pe(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ft()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,d)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=yield this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return g(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return g(this,null,function*(){try{return t?yield F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ke}):yield this._useSession(s=>g(this,null,function*(){var r,a,i;const{data:o,error:l}=s;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _e}:yield F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ke})}))}catch(s){if(D(s))return ji(s)&&(yield this._removeSession(),yield Ne(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}})}updateUser(r){return g(this,arguments,function*(t,s={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._updateUser(t,s)}))})}_updateUser(r){return g(this,arguments,function*(t,s={}){try{return yield this._useSession(a=>g(this,null,function*(){const{data:i,error:o}=a;if(o)throw o;if(!i.session)throw new _e;const l=i.session;let c=null,h=null;this.flowType==="pkce"&&t.email!=null&&([c,h]=yield Fe(this.storage,this.storageKey));const{data:d,error:u}=yield F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:ke});if(u)throw u;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(a){if(D(a))return{data:{user:null},error:a};throw a}})}setSession(t){return g(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return g(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new _e;const s=Date.now()/1e3;let r=s,a=!0,i=null;const{payload:o}=Mt(t.access_token);if(o.exp&&(r=o.exp,a=r<=s),a){const{session:l,error:c}=yield this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=yield this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(D(s))return{data:{session:null,user:null},error:s};throw s}})}refreshSession(t){return g(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return g(this,null,function*(){try{return yield this._useSession(s=>g(this,null,function*(){var r;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new _e;const{session:a,error:i}=yield this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}}))}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}})}_getSessionFromURL(t,s){return g(this,null,function*(){try{if(!le())throw new mt("No browser detected.");if(t.error||t.error_description||t.error_code)throw new mt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Es("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mt("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Es("No code detected.");const{data:T,error:k}=yield this._exchangeCodeForSession(t.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:h}=t;if(!i||!l||!o||!h)throw new mt("No session defined in URL");const d=Math.round(Date.now()/1e3),u=parseInt(l);let x=d+u;c&&(x=parseInt(c));const v=x-d;v*1e3<=Ve&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${u}s`);const m=x-u;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,x,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,x,d);const{data:w,error:y}=yield this._getUser(i);if(y)throw y;const b={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:u,expires_at:x,refresh_token:o,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(r){if(D(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return g(this,null,function*(){const s=yield Pe(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)})}signOut(){return g(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return g(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(s=>g(this,null,function*(){var r;const{data:a,error:i}=s;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=yield this.admin.signOut(o,t);if(l&&!(wi(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(yield this._removeSession(),yield Ne(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(t){const s=$i(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),g(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){this._emitInitialSession(s)}))}),{data:{subscription:r}}}_emitInitialSession(t){return g(this,null,function*(){return yield this._useSession(s=>g(this,null,function*(){var r,a;try{const{data:{session:i},error:o}=s;if(o)throw o;yield(r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){yield(a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}}))})}resetPasswordForEmail(r){return g(this,arguments,function*(t,s={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=yield Fe(this.storage,this.storageKey,!0));try{return yield F(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(D(o))return{data:null,error:o};throw o}})}getUserIdentities(){return g(this,null,function*(){var t;try{const{data:s,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}linkIdentity(t){return g(this,null,function*(){var s;try{const{data:r,error:a}=yield this._useSession(i=>g(this,null,function*(){var o,l,c,h,d;const{data:u,error:x}=i;if(x)throw x;const v=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield F(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(h=u.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})}));if(a)throw a;return le()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(D(r))return{data:{provider:t.provider,url:null},error:r};throw r}})}unlinkIdentity(t){return g(this,null,function*(){try{return yield this._useSession(s=>g(this,null,function*(){var r,a;const{data:i,error:o}=s;if(o)throw o;return yield F(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})}))}catch(s){if(D(s))return{data:null,error:s};throw s}})}_refreshAccessToken(t){return g(this,null,function*(){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return yield Ui(a=>g(this,null,function*(){return a>0&&(yield Ii(200*Math.pow(2,a-1))),this._debug(s,"refreshing attempt",a),yield F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xe})}),(a,i)=>{const o=200*Math.pow(2,a);return i&&Lt(i)&&Date.now()+o-r<Ve})}catch(r){if(this._debug(s,"error",r),D(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,s){return g(this,null,function*(){const r=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),le()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}})}_recoverAndRefresh(){return g(this,null,function*(){var t,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=yield Pe(this.storage,this.storageKey);if(a&&this.userStorage){let o=yield Pe(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},yield ze(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ft()}else if(a&&!a.user&&!a.user){const o=yield Pe(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,yield Ne(this.storage,this.storageKey+"-user"),yield ze(this.storage,this.storageKey,a)):a.user=Ft()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&(yield this._removeSession());return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Dt;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Dt}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=yield this._callRefreshToken(a.refresh_token);o&&(console.error(o),Lt(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=yield this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else yield this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}})}_callRefreshToken(t){return g(this,null,function*(){var s,r;if(!t)throw new _e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new _t;const{data:i,error:o}=yield this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new _e;yield this._saveSession(i.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),D(i)){const o={session:null,error:i};return Lt(i)||(yield this._removeSession()),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}})}_notifyAllSubscribers(t,s,r=!0){return g(this,null,function*(){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(l=>g(this,null,function*(){try{yield l.callback(t,s)}catch(c){i.push(c)}}));if(yield Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}})}_saveSession(t){return g(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&(yield ze(this.userStorage,this.storageKey+"-user",{user:s.user}));const a=Object.assign({},s);delete a.user;const i=Us(a);yield ze(this.storage,this.storageKey,i)}else{const a=Us(s);yield ze(this.storage,this.storageKey,a)}})}_removeSession(){return g(this,null,function*(){this._debug("#_removeSession()"),yield Ne(this.storage,this.storageKey),yield Ne(this.storage,this.storageKey+"-code-verifier"),yield Ne(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Ne(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}_startAutoRefresh(){return g(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ve);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>g(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return g(this,null,function*(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return g(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return g(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return g(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>g(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(s=>g(this,null,function*(){const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Ve);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ve}ms, refresh threshold is ${ts} ticks`),a<=ts&&(yield this._callRefreshToken(r.refresh_token))}))}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof xr)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return g(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>g(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return g(this,null,function*(){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>g(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,s,r){return g(this,null,function*(){const a=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=yield Fe(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`})}_unenroll(t){return g(this,null,function*(){try{return yield this._useSession(s=>g(this,null,function*(){var r;const{data:a,error:i}=s;return i?{data:null,error:i}:yield F(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})}))}catch(s){if(D(s))return{data:null,error:s};throw s}})}_enroll(t){return g(this,null,function*(){try{return yield this._useSession(s=>g(this,null,function*(){var r,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:h}=yield F(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(s){if(D(s))return{data:null,error:s};throw s}})}_verify(t){return g(this,null,function*(){return this._acquireLock(-1,()=>g(this,null,function*(){try{return yield this._useSession(s=>g(this,null,function*(){var r;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=yield F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})}))}catch(s){if(D(s))return{data:null,error:s};throw s}}))})}_challenge(t){return g(this,null,function*(){return this._acquireLock(-1,()=>g(this,null,function*(){try{return yield this._useSession(s=>g(this,null,function*(){var r;const{data:a,error:i}=s;return i?{data:null,error:i}:yield F(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})}))}catch(s){if(D(s))return{data:null,error:s};throw s}}))})}_challengeAndVerify(t){return g(this,null,function*(){const{data:s,error:r}=yield this._challenge({factorId:t.factorId});return r?{data:null,error:r}:yield this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})})}_listFactors(){return g(this,null,function*(){const{data:{user:t},error:s}=yield this.getUser();if(s)return{data:null,error:s};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}})}_getAuthenticatorAssuranceLevel(){return g(this,null,function*(){return this._acquireLock(-1,()=>g(this,null,function*(){return yield this._useSession(t=>g(this,null,function*(){var s,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Mt(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(r){return g(this,arguments,function*(t,s={keys:[]}){let a=s.keys.find(c=>c.kid===t);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(c=>c.kid===t),a&&this.jwks_cached_at+bi>i)return a;const{data:o,error:l}=yield F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,a=o.keys.find(c=>c.kid===t),!a)?null:a})}getClaims(r){return g(this,arguments,function*(t,s={}){try{let a=t;if(!a){const{data:m,error:w}=yield this.getSession();if(w||!m.session)return{data:null,error:w};a=m.session.access_token}const{header:i,payload:o,signature:l,raw:{header:c,payload:h}}=Mt(a);s!=null&&s.allowExpired||Wi(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:m}=yield this.getUser(a);if(m)throw m;return{data:{claims:o,header:i,signature:l},error:null}}const u=Vi(i.alg),x=yield crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!(yield crypto.subtle.verify(u,x,l,Pi(`${c}.${h}`))))throw new as("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}})}}rt.nextInstanceID=0;const io=rt;class oo extends io{constructor(t){super(t)}}var lo=globalThis&&globalThis.__awaiter||function(n,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{h(r.next(d))}catch(u){o(u)}}function c(d){try{h(r.throw(d))}catch(u){o(u)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,t||[])).next())})};class co{constructor(t,s,r){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=mi(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:ni,realtime:oi,auth:Object.assign(Object.assign({},ii),{storageKey:h}),global:ai},u=gi(r!=null?r:{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(x,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=hi(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new kn(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new ti(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new sn(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},r={}){return this.rest.rpc(t,s,r)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return lo(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:h},d,u){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oo({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),d),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:h,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Bn(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,s,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ho=(n,t,s)=>new co(n,t,s);function uo(){if(typeof window!="undefined"||typeof process=="undefined")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}uo()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mo="https://vswquozkxezgvfbovmbp.supabase.co",go="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzd3F1b3preGV6Z3ZmYm92bWJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MzQyMjEsImV4cCI6MjA4MTMxMDIyMX0.OD3s1gpNAa4vmW1OFe-Z-c1Qz40vkK2JovbEEJI-cEM",G=ho(mo,go),fo=(n,t,s)=>g(H,null,function*(){const{data:r,error:a}=yield G.auth.signUp({email:n,password:t,options:{data:{full_name:s},emailRedirectTo:`${window.location.origin}?confirmed=true`}});return{data:r,error:a}}),qs=(n,t)=>g(H,null,function*(){const{data:s,error:r}=yield G.auth.signInWithPassword({email:n,password:t});return{data:s,error:r}}),po=()=>g(H,null,function*(){const{data:{user:n},error:t}=yield G.auth.getUser();return{user:n,error:t}}),xo=({onStartDemo:n,onSignIn:t,onShowFeedback:s})=>{const[r,a]=C.useState(""),i=()=>{console.log("LandingPage: handleGetStarted called"),console.log("LandingPage: About to call onStartDemo"),console.log("LandingPage: onStartDemo function:",typeof n),n(),console.log("LandingPage: onStartDemo called successfully")},o=l=>g(H,null,function*(){if(l.preventDefault(),!!r)try{const{error:c}=yield G.from("email_signups").insert({email:r.trim().toLowerCase(),source:"landing-page"});if(c)if(c.code==="23505")alert(`Thanks! ${r} is already on our notification list.`);else throw c;else alert(`Thanks! We'll notify ${r} when FlowerCost Pro launches.`);a("")}catch(c){console.error("Email signup error:",c),alert("There was an error signing up. Please try again.")}});return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:"/image.png",alt:"FlowerCost Pro",className:"h-36 w-auto"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),console.log("Landing page feedback button clicked"),s()},className:"text-blue-600 hover:text-blue-700 font-medium",children:"Give Feedback"}),e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-700 font-medium",children:"Sign In"}),e.jsx("button",{onClick:i,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Try Free Demo"})]})]})})}),e.jsx("section",{className:"bg-gradient-to-br from-green-50 to-blue-50 py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-full text-sm font-medium inline-block mb-6",children:" Stop Losing Money on Arrangements"}),e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6 leading-tight",children:["Train Staff to Maintain",e.jsx("span",{className:"text-green-600",children:" 40%+ Profit"})," Margins"]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"FlowerCost Pro prevents costly pricing mistakes during busy seasons. Real-time cost tracking ensures every arrangement stays profitable, even with seasonal staff."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[e.jsxs("button",{onClick:i,className:"bg-green-600 text-white px-8 py-4 rounded-lg hover:bg-green-700 transition-colors font-semibold text-lg flex items-center justify-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),"Try Free Demo"]}),e.jsxs("form",{onSubmit:o,className:"flex gap-2",children:[e.jsx("input",{type:"email",value:r,onChange:l=>a(l.target.value),placeholder:"Enter your email",className:"flex-1 px-4 py-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Get Notified"})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"14-day free trial"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Works with any POS"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Cancel anytime"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border",children:[e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ve,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-800",children:"Staff Training Mode"})]}),e.jsxs("div",{className:"text-sm text-purple-700",children:["Customer Budget: ",e.jsx("span",{className:"font-bold",children:"$75.00"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Red Roses (12)"}),e.jsx("span",{className:"text-green-600 font-bold",children:"$30.00"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Baby's Breath (3)"}),e.jsx("span",{className:"text-green-600 font-bold",children:"$16.88"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Glass Vase (1)"}),e.jsx("span",{className:"text-green-600 font-bold",children:"$17.00"})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Total: $63.88"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-700 font-bold",children:"WITHIN BUDGET"})]})]}),e.jsx("div",{className:"text-sm text-green-600 mt-1",children:"$11.12 remaining"})]})]}),e.jsx("div",{className:"absolute -top-4 -right-4 bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-sm font-bold",children:"Live Demo!"})]})]})})}),e.jsx("section",{className:"py-20 bg-red-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"The Hidden Profit Killer in Your Shop"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"During busy seasons, well-meaning staff create beautiful arrangements that lose money. One $20 mistake per day costs you $7,300 per year."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-red-200",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full w-fit mb-4",children:e.jsx(me,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Seasonal Staff Mistakes"}),e.jsx("p",{className:"text-gray-600",children:"Holiday workers don't know your costs. They create gorgeous arrangements that sell at a loss because they used too many premium stems."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-red-200",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full w-fit mb-4",children:e.jsx(zt,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Rush Hour Pressure"}),e.jsx("p",{className:"text-gray-600",children:"When customers are waiting, staff grab whatever looks good. No time to calculate costs means profit margins disappear."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-red-200",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full w-fit mb-4",children:e.jsx(Ae,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inconsistent Pricing"}),e.jsx("p",{className:"text-gray-600",children:"Different staff price similar arrangements differently. Customers notice, and your profit margins suffer."})]})]})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Real-Time Profit Protection"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"FlowerCost Pro guides staff to create profitable arrangements every time. No complex training required - just instant feedback."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full flex-shrink-0",children:e.jsx(ve,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Staff Training Mode"}),e.jsx("p",{className:"text-gray-600",children:"Staff see customer budget and real-time cost tracking. Green means profitable, red means stop adding items."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full flex-shrink-0",children:e.jsx(js,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Universal POS Integration"}),e.jsx("p",{className:"text-gray-600",children:"Works with Square, Clover, Toast, or any POS system. Simple copy/paste - no technical setup required."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full flex-shrink-0",children:e.jsx(xs,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Profit Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Track which arrangements make money and which don't. Identify your most profitable products and staff performance."})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-8",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full w-fit mx-auto mb-3",children:e.jsx(Ie,{className:"w-8 h-8 text-green-600"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-900",children:"Profit Impact"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-red-700",children:"Before FlowerCost Pro:"}),e.jsx("span",{className:"font-bold text-red-700",children:"25% margin"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-green-700",children:"After FlowerCost Pro:"}),e.jsx("span",{className:"font-bold text-green-700",children:"45% margin"})]}),e.jsxs("div",{className:"text-center pt-4 border-t",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"+$15,600"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Additional profit per year*"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Based on $200/day average sales"})]})]})]})})]})]})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"text-center mb-16",children:e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Everything You Need to Protect Profits"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full w-fit mb-4",children:e.jsx(ve,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Staff Training Mode"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Real-time budget tracking prevents costly mistakes. Staff see exactly how much they can spend while staying profitable."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full w-fit mb-4",children:e.jsx(xs,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Profit Analytics"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Track performance by product, staff member, and time period. Identify what's working and what's not."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full w-fit mb-4",children:e.jsx(Ae,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Arrangement Recipes"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Save profitable arrangements as templates. Ensure consistency and maintain margins on popular designs."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-full w-fit mb-4",children:e.jsx(js,{className:"w-6 h-6 text-orange-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Universal POS Integration"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Works with any point-of-sale system. Simple copy/paste integration - no technical setup required."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full w-fit mb-4",children:e.jsx(Js,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Data Security"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Your business data is encrypted and backed up automatically. Access from any device, anywhere."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full w-fit mb-4",children:e.jsx(zt,{className:"w-6 h-6 text-yellow-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Quick Setup"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Start protecting profits in under 10 minutes. Import your products and begin training staff immediately."})]})]})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"text-center mb-16",children:e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Florists Love FlowerCost Pro"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl p-8 border border-green-200",children:[e.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((l,c)=>e.jsx($t,{className:"w-5 h-5 text-yellow-400 fill-current"},c))}),e.jsx("p",{className:"text-gray-700 mb-4 italic",children:'"Finally, a solution that actually works with our existing POS! My seasonal staff can now create arrangements without me worrying about profit margins."'}),e.jsx("div",{className:"font-semibold text-gray-900",children:"Sarah M."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bloom & Blossom Florist"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-8 border border-blue-200",children:[e.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((l,c)=>e.jsx($t,{className:"w-5 h-5 text-yellow-400 fill-current"},c))}),e.jsx("p",{className:"text-gray-700 mb-4 italic",children:'"The staff training mode is genius. New employees understand profitable pricing in minutes, not hours. Our margins improved immediately."'}),e.jsx("div",{className:"font-semibold text-gray-900",children:"Mike R."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Garden Gate Flowers"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-8 border border-purple-200",children:[e.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((l,c)=>e.jsx($t,{className:"w-5 h-5 text-yellow-400 fill-current"},c))}),e.jsx("p",{className:"text-gray-700 mb-4 italic",children:`"I wish I had this during last Valentine's Day! The profit analytics showed me exactly which arrangements were losing money. Never again."`}),e.jsx("div",{className:"font-semibold text-gray-900",children:"Jennifer L."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Petals & Stems"})]})]})]})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Simple, Transparent Pricing"}),e.jsx("p",{className:"text-xl text-gray-600",children:"One price, all features. Cancel anytime."})]}),e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border-2 border-green-500 relative",children:[e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"bg-green-500 text-white px-6 py-2 rounded-full text-sm font-bold",children:"MOST POPULAR"})}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"FlowerCost Pro"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"text-5xl font-bold text-gray-900",children:"$39"}),e.jsx("span",{className:"text-xl text-gray-600",children:"/month"})]}),e.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Unlimited products & arrangements"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Staff training mode"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Profit analytics & reporting"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Universal POS integration"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Arrangement recipe library"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Email support"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"14-day free trial"})]})]}),e.jsxs("button",{onClick:i,className:"w-full bg-green-600 text-white py-4 rounded-lg hover:bg-green-700 transition-colors font-semibold text-lg flex items-center justify-center gap-2",children:["Start Free Trial",e.jsx(qr,{className:"w-5 h-5"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"No credit card required  Cancel anytime"})]})]})}),e.jsxs("div",{className:"text-center mt-12",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:[e.jsx("strong",{children:"ROI Guarantee:"})," FlowerCost Pro pays for itself with just 1-2 prevented mistakes per month."]}),e.jsx("div",{className:"bg-green-100 border border-green-200 rounded-lg p-4 max-w-2xl mx-auto",children:e.jsx("p",{className:"text-green-800 font-medium",children:" Average customer saves $15,600+ per year in recovered profit margins"})})]})]})}),e.jsx("section",{className:"py-20 bg-green-600",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Stop Losing Money on Beautiful Arrangements"}),e.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-3xl mx-auto",children:"Join hundreds of florists who've protected their profits with FlowerCost Pro. Start your free trial today - no credit card required."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[e.jsxs("button",{onClick:i,className:"bg-white text-green-600 px-8 py-4 rounded-lg hover:bg-gray-100 transition-colors font-semibold text-lg flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),"Try Free Demo"]}),e.jsxs("form",{onSubmit:o,className:"flex gap-2",name:"email-signup-cta",children:[e.jsx("input",{type:"email",value:r,onChange:l=>a(l.target.value),placeholder:"Enter your email",className:"px-4 py-4 border border-green-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-white bg-green-500 text-white placeholder-green-200",required:!0}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Get Notified"})]})]}),e.jsx("p",{className:"text-green-200 text-sm mt-6",children:" 14-day free trial   Works with any POS   Cancel anytime"})]})}),e.jsx("footer",{className:"bg-gray-900 text-white py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsx("img",{src:"/image.png",alt:"FlowerCost Pro",className:"h-24 w-auto"})}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Professional florist profit analysis and staff training software."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Pricing"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Demo"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Help Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Contact Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Training"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Privacy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white",children:"Terms"})})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400",children:e.jsx("p",{children:" 2024 FlowerCost Pro. All rights reserved."})})]})})]})},yo=({onAuthSuccess:n,isPasswordReset:t=!1,onBackToLanding:s})=>{const[r,a]=C.useState(!1),[i,o]=C.useState(!1),[l,c]=C.useState(!1),[h,d]=C.useState(!1),[u,x]=C.useState({email:"",password:"",fullName:"",confirmPassword:""}),[v,m]=C.useState(null),[w,y]=C.useState(null);C.useEffect(()=>{t&&y("Please enter your new password below.")},[t]);const b=U=>g(H,null,function*(){U.preventDefault(),m(null),c(!0);const M=u.email.trim().toLowerCase();try{if(t){const{error:R}=yield G.auth.updateUser({password:u.password});if(R)throw R;alert("Password updated successfully! You are now signed in."),n();return}if(r){if(u.password!==u.confirmPassword)throw new Error("Passwords do not match");if(u.password.length<6)throw new Error("Password must be at least 6 characters");if(!u.fullName.trim())throw new Error("Full name is required");const{error:R}=yield fo(M,u.password,u.fullName);if(R)throw R;try{const{error:ae}=yield qs(M,u.password);ae?(alert("Account created! Please check your email for confirmation, then sign in."),a(!1),k()):n()}catch(ae){alert("Account created! Please check your email for confirmation, then sign in."),a(!1),k()}}else{const{error:R}=yield qs(M,u.password);if(R)throw R.message.includes("Invalid login credentials")?new Error("Email or password is incorrect. Please check your credentials and try again."):R.message.includes("Email not confirmed")?new Error("Please check your email and click the confirmation link before signing in."):R;n()}}catch(R){console.error("Authentication error:",R),m(R.message)}finally{c(!1)}}),T=()=>g(H,null,function*(){if(!u.email.trim()){m("Please enter your email address first");return}d(!0),m(null),y(null);try{const{error:U}=yield G.auth.resetPasswordForEmail(u.email.trim().toLowerCase(),{redirectTo:`${window.location.origin}?type=recovery&confirmed=true`});if(U)throw U;y("Password reset email sent! Check your inbox and follow the instructions.")}catch(U){console.error("Password reset error:",U),m(U.message)}finally{d(!1)}}),k=()=>{x({email:"",password:"",fullName:"",confirmPassword:""}),m(null),y(null)},E=()=>{a(!r),k()};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/image.png",alt:"FlowerCost Pro",className:"h-36 w-auto mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:t?"Reset Password":r?"Create Account":"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:t?"Enter your new password below":r?"Start managing your flower shop profits":"Sign in to your FlowerCost Pro account"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[r&&!t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:u.fullName,onChange:U=>x(O(P({},u),{fullName:U.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter your full name",required:!0})]}),!t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:u.email,onChange:U=>x(O(P({},u),{email:U.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t?"New Password":"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",value:u.password,onChange:U=>x(O(P({},u),{password:U.target.value})),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:t?"Enter your new password":"Enter your password",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(ca,{className:"w-5 h-5"}):e.jsx(Gs,{className:"w-5 h-5"})})]})]}),(r||t)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",value:u.confirmPassword,onChange:U=>x(O(P({},u),{confirmPassword:U.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Confirm your password",required:!0,minLength:6})]}),w&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-green-700 text-sm",children:w})}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-700 text-sm",children:v})}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsx(bs,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[r?e.jsx(Ga,{className:"w-5 h-5"}):e.jsx(wa,{className:"w-5 h-5"}),t?"Update Password":r?"Create Account":"Sign In"]})})]}),!r&&!t&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("button",{onClick:T,disabled:h,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center justify-center gap-1 mx-auto disabled:opacity-50",children:[h?e.jsx(bs,{className:"w-4 h-4 animate-spin"}):e.jsx(ga,{className:"w-4 h-4"}),"Forgot your password?"]})}),!t&&e.jsxs("div",{className:"mt-6 text-center",children:[s&&e.jsx("button",{onClick:s,className:"text-gray-600 hover:text-gray-700 font-medium mr-4",children:" Back to Home"}),e.jsx("button",{onClick:E,className:"text-green-600 hover:text-green-700 font-medium",children:r?"Already have an account? Sign in":"Don't have an account? Sign up"})]}),r&&!t&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-700",children:"By creating an account, you agree to our Terms of Service and Privacy Policy. Your data is encrypted and secure."})})]})})},bo=({userRole:n,userName:t,storeName:s,onRoleChange:r,activeSection:a,onSectionChange:i,onLogout:o,onShowFeedback:l,children:c})=>{var w;const[h,d]=C.useState(!0),u=y=>{switch(y){case"owner":return e.jsx(sa,{className:"w-4 h-4 text-yellow-600"});case"manager":return e.jsx(Js,{className:"w-4 h-4 text-blue-600"});case"staff":return e.jsx(Ns,{className:"w-4 h-4 text-green-600"});default:return e.jsx(Ns,{className:"w-4 h-4"})}},x=y=>{switch(y){case"owner":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"manager":return"bg-blue-100 text-blue-800 border-blue-200";case"staff":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=[{id:"overview",label:"Overview",icon:ys,roles:["owner","manager","staff"]},{id:"settings",label:"Settings",icon:is,roles:["owner"]},{id:"products",label:"Product Library",icon:He,roles:["owner","manager"]},{id:"recipes",label:"Arrangement Recipes",icon:Vt,roles:["owner","manager"]},{id:"create-order",label:"Create Order",icon:be,roles:["owner","manager","staff"]},{id:"orders",label:"Order History",icon:be,roles:["owner","manager"]},{id:"analytics",label:"Profit Analytics",icon:me,roles:["owner","manager"]},{id:"insights",label:"Business Insights",icon:me,roles:["owner","manager"]},{id:"staff-training",label:"Staff Training",icon:ve,roles:["owner"]}].filter(y=>y.roles.includes(n));return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:`${h?"w-64":"w-16"} bg-white shadow-lg transition-all duration-300 flex flex-col`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/image.png",alt:"FlowerCost Pro",className:"h-36 w-auto"}),h&&e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-gray-800 text-sm",children:"FlowerCost Pro"}),e.jsx("p",{className:"text-xs text-gray-500",children:s||"Your Flower Shop"})]})]})}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-full",children:u(n)}),h&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-800",children:t||"User"}),e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${x(n)}`,children:[u(n),n.charAt(0).toUpperCase()+n.slice(1)]})]})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:m.map(y=>{const b=y.icon,T=a===y.id;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>i(y.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${T?"bg-green-100 text-green-700 border border-green-200":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(b,{className:"w-5 h-5"}),h&&e.jsx("span",{className:"font-medium",children:y.label})]})},y.id)})})}),h&&e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:t==="Demo User"?"Demo Mode - Switch Role:":"Switch Role:"}),e.jsxs("select",{value:n,onChange:y=>r(y.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"staff",children:"Staff"})]})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>d(!h),className:"w-full flex items-center justify-center p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ys,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:((w=m.find(y=>y.id===a))==null?void 0:w.label)||"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:n==="staff"?"Create beautiful arrangements within budget":n==="manager"?"Manage products and monitor performance":"Full business control and analytics"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${x(n)}`,children:[u(n),e.jsxs("span",{className:"ml-1",children:[n.charAt(0).toUpperCase()+n.slice(1)," Access"]})]}),e.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),console.log("Dashboard feedback button clicked"),l()},className:"flex items-center gap-2 px-3 py-1 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors",title:"Give feedback",children:[e.jsx(ka,{className:"w-4 h-4"}),"Feedback"]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-1 text-sm text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Sign out",children:[e.jsx(Na,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:e.jsx("div",{"data-section":a,children:c})})]})]})},vo=({activeSection:n,userRole:t,orders:s,templates:r,children:a})=>{if(n!=="overview")return e.jsx(e.Fragment,{children:a});const i=s.reduce((v,m)=>v+m.totalRetail,0),o=s.reduce((v,m)=>v+m.profit,0),l=s.length>0?i/s.length:0,c=i>0?o/i*100:0,h=new Date;h.setDate(h.getDate()-7);const d=s.filter(v=>v.date>=h),u=new Map;s.forEach(v=>{if(v.staffName){const m=u.get(v.staffName)||{orders:0,revenue:0};m.orders+=1,m.revenue+=v.totalRetail,u.set(v.staffName,m)}});const x=Array.from(u.entries()).sort(([,v],[,m])=>m.revenue-v.revenue).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 border border-green-200",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:["Welcome back",t==="staff"?"":" to your dashboard","!"]}),e.jsx("p",{className:"text-gray-600",children:t==="staff"?'Ready to create beautiful arrangements? Use the "Create Order" section to build arrangements within customer budgets.':t==="manager"?"Monitor your shop's performance and manage your product library.":"Here's an overview of your flower shop's performance and key metrics."})]}),(t==="owner"||t==="manager")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(Ie,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("div",{className:"text-xl font-bold text-green-700 truncate",children:["$",i.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(me,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Profit"}),e.jsxs("div",{className:"text-xl font-bold text-blue-700 truncate",children:["$",o.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[c.toFixed(1),"% margin"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(be,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"}),e.jsxs("div",{className:"text-xl font-bold text-purple-700 truncate",children:["$",l.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:e.jsx(He,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Products"}),e.jsx("div",{className:"text-xl font-bold text-orange-700",children:r.length}),e.jsxs("div",{className:"text-xs text-orange-600",children:[s.length," orders"]})]})]})})]}),t==="staff"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(be,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"}),e.jsx("div",{className:"text-xl font-bold text-green-700",children:s.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(He,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Products Available"}),e.jsx("div",{className:"text-xl font-bold text-blue-700",children:r.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(ve,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Recent Orders"}),e.jsx("div",{className:"text-xl font-bold text-purple-700",children:d.length}),e.jsx("div",{className:"text-xs text-purple-600",children:"Last 7 days"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600"}),"Recent Orders"]}),d.length>0?e.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(v=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:v.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[v.date.toLocaleDateString(),"  ",v.products.length," items",v.staffName&&`  by ${v.staffName}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",v.totalRetail.toFixed(2)]}),(t==="owner"||t==="manager")&&e.jsxs("div",{className:"text-sm text-gray-500",children:["$",v.profit.toFixed(2)," profit"]})]})]},v.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(be,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No recent orders"})]})]}),(t==="owner"||t==="manager")&&x.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-yellow-600"}),"Top Performing Staff"]}),e.jsx("div",{className:"space-y-3",children:x.map(([v,m],w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-yellow-100 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold text-yellow-700",children:w+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:v}),e.jsxs("div",{className:"text-sm text-gray-500",children:[m.orders," orders"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",m.revenue.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-500",children:"revenue"})]})]},v))})]}),t==="staff"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-purple-600"}),"Quick Actions"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:" Staff Tips"}),e.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[e.jsx("li",{children:" Always check customer budget before starting"}),e.jsx("li",{children:' Use "Create Order" to build arrangements'}),e.jsx("li",{children:" Copy order details to your POS when ready"}),e.jsx("li",{children:" Your name will be tracked with each order"})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:t==="staff"?"How to Create Orders":"Quick Start Guide"}),e.jsx("div",{className:`grid grid-cols-1 ${t==="staff"?"md:grid-cols-3":"md:grid-cols-2 lg:grid-cols-4"} gap-4`,children:t==="staff"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"font-medium text-green-800 mb-2",children:"1. Create Order"}),e.jsx("p",{className:"text-sm text-green-700",children:'Use "Create Order" to build arrangements with real-time cost tracking'})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-2",children:"2. Stay in Budget"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Watch the budget tracker to keep arrangements profitable"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"font-medium text-purple-800 mb-2",children:"3. Send to POS"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Copy order details and paste into your POS system"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"font-medium text-green-800 mb-2",children:"1. Configure Settings"}),e.jsx("p",{className:"text-sm text-green-700",children:"Start here: Set your markup percentages and store information"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-2",children:"2. Build Product Library"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Add your flowers, vases, and accessories with costs and inventory"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"font-medium text-purple-800 mb-2",children:"3. Create Recipes"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Optional: Save your best arrangements as reusable recipes"})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"font-medium text-yellow-800 mb-2",children:"4. Start Creating Orders"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Begin making arrangements with automatic profit tracking"})]})]})})]})]})},wo=({order:n,posSettings:t,onClose:s})=>{const[r,a]=C.useState("idle"),i=()=>({orderId:n.id,orderName:n.name,storeName:t.storeName,staffName:n.staffName,staffId:n.staffId,totalAmount:n.totalRetail,items:n.products.map(d=>({name:d.name,quantity:d.quantity,price:d.wholesaleCost*2.5,category:d.type})),notes:n.notes,timestamp:n.date.toISOString()}),o=()=>{const d=[];return d.push("=".repeat(50)),d.push(`ARRANGEMENT: ${n.name}`),d.push(`STAFF: ${n.staffName}${n.staffId?` (ID: ${n.staffId})`:""}`),d.push(`DATE: ${n.date.toLocaleDateString()} ${n.date.toLocaleTimeString()}`),d.push(`ORDER ID: #${n.id}`),d.push("=".repeat(50)),d.push(""),n.notes&&(d.push("CUSTOMER NOTES:"),d.push(n.notes),d.push("")),d.push("ITEMS:"),d.push("-".repeat(50)),n.products.forEach((u,x)=>{const v=u.wholesaleCost*2.5,m=v*u.quantity;d.push(`${x+1}. ${u.name} (${u.type})`),d.push(`   Qty: ${u.quantity} x $${v.toFixed(2)} = $${m.toFixed(2)}`),d.push("")}),d.push("-".repeat(50)),d.push(`TOTAL AMOUNT: $${n.totalRetail.toFixed(2)}`),d.push(`STAFF: ${n.staffName}`),d.push("=".repeat(50)),d.join(`
`)},l=()=>g(H,null,function*(){const d=o();console.log("Attempting to copy text:",d);try{yield navigator.clipboard.writeText(d),console.log("Clipboard write successful"),a("success"),alert(` SUCCESS! Order details copied to clipboard!

 NEXT STEPS:
1. Go to your your POS system
2. Create a new sale for $${n.totalRetail.toFixed(2)}
3. In the notes/description field, press Ctrl+V (or Cmd+V on Mac) to paste
4. Process customer payment

 Staff: ${n.staffName} will be recorded with this sale.`)}catch(u){console.error("Clipboard API failed:",u);try{const x=document.createElement("textarea");x.value=d,x.style.position="absolute",x.style.left="-9999px",x.style.top="0",x.style.opacity="0",document.body.appendChild(x),x.focus(),x.select();const v=document.execCommand("copy");if(document.body.removeChild(x),console.log("Fallback copy result:",v),v)a("success"),alert(` SUCCESS! Order details copied to clipboard!

 NEXT STEPS:
1. Go to your your POS system
2. Create a new sale for $${n.totalRetail.toFixed(2)}
3. In the notes/description field, press Ctrl+V (or Cmd+V on Mac) to paste
4. Process customer payment

 Staff: ${n.staffName} will be recorded with this sale.`);else throw new Error("Copy command failed")}catch(x){console.error("Fallback copy also failed:",x),a("error"),alert(" Copy failed. The manual copy area will appear below - please select all text and copy it manually.")}}}),c=()=>{var w;const d=i(),u=JSON.stringify(d,null,2),x=new Blob([u],{type:"application/json"}),v=URL.createObjectURL(x),m=document.createElement("a");m.href=v,m.download=`order_${n.id}_${(w=n.staffName)==null?void 0:w.replace(/\s+/g,"_")}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(v)},h=()=>{s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Send to POS System"}),e.jsx("p",{className:"text-gray-600",children:"Copy arrangement details to your point of sale"})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx("span",{className:"text-2xl",children:""})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Arrangement Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Name:"}),e.jsx("div",{className:"font-medium",children:n.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Staff:"}),e.jsx("div",{className:"font-medium",children:n.staffName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Total:"}),e.jsxs("div",{className:"font-bold text-green-600",children:["$",n.totalRetail.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Items:"}),e.jsxs("div",{className:"font-medium",children:[n.products.length," products"]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-purple-600",children:"POS System:"}),e.jsx("div",{className:"font-medium text-blue-600",children:"Manual Copy/Paste (Universal)"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Copy Order to Your POS"}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ht,{className:"w-5 h-5 text-blue-600"}),e.jsx("h5",{className:"font-medium text-gray-800",children:"Copy Order Details"}),e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"UNIVERSAL"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Copy the formatted order details and paste them into any POS system."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:l,className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(Ht,{className:"w-4 h-4"})," Copy Order Details"]}),e.jsxs("button",{onClick:c,className:"bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(na,{className:"w-4 h-4"}),"Download Backup"]})]})]})]}),r==="success"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-800",children:" Order details copied to clipboard!"}),e.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Now go to your POS system and paste (Ctrl+V or Cmd+V) in the order notes."})]})]})}),r==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-red-800",children:" Copy to clipboard failed"}),e.jsx("div",{className:"text-sm text-red-700 mt-1",children:"Please manually copy the order details from the text box below."})]})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:" Step-by-Step Instructions:"}),e.jsxs("ol",{className:"text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:'Click " Copy Order Details" button above'}),e.jsx("li",{children:"Go to your POS system and create a new sale"}),e.jsxs("li",{children:["Enter the total amount: ",e.jsxs("strong",{children:["$",n.totalRetail.toFixed(2)]})]}),e.jsxs("li",{children:["In the notes/description field, press ",e.jsx("strong",{children:"Ctrl+V"})," (or ",e.jsx("strong",{children:"Cmd+V"})," on Mac) to paste"]}),e.jsx("li",{children:"Process payment with customer"}),e.jsxs("li",{children:["The staff name (",n.staffName,") will be recorded with the sale"]})]}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-200",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:" Tip:"}),' After clicking "Copy Order Details", the information is saved to your clipboard. You can then paste it anywhere by pressing Ctrl+V (Windows) or Cmd+V (Mac).']})})]}),(r==="error"||r==="idle")&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:r==="error"?"Manual Copy - Select All Text Below:":"Order Details (Manual Copy if needed):"}),e.jsx("textarea",{value:o(),readOnly:!0,className:"w-full h-48 p-3 border border-yellow-300 rounded-md text-sm font-mono bg-white resize-none",onClick:d=>d.currentTarget.select()}),e.jsx("p",{className:"text-xs text-yellow-700 mt-2",children:"Click in the text area above, press Ctrl+A to select all, then Ctrl+C to copy. Then paste in your POS with Ctrl+V."})]})]})})})},jo=({templates:n,recipes:t,markupSettings:s,onSaveOrder:r,onOrderChange:a,userRole:i="owner",posSettings:o})=>{const[l,c]=C.useState([]),[h,d]=C.useState(""),[u,x]=C.useState(""),[v,m]=C.useState(""),[w,y]=C.useState(""),[b,T]=C.useState(""),[k,E]=C.useState(""),[U,M]=C.useState(""),[R,ae]=C.useState("custom"),[ee,ge]=C.useState(""),[we,de]=C.useState(!1),[je,fe]=C.useState(!1),[he,N]=C.useState(null),[L,B]=C.useState(!1),p=n.filter(S=>S.name.toLowerCase().includes(h.toLowerCase().trim())),f=t.filter(S=>S.name.toLowerCase().includes(ee.toLowerCase().trim())),j=(S,q=1)=>{const J=s[S.type],I=S.wholesaleCost*J,V=S.wholesaleCost*q,se=I*q,ot={id:`order-item-${Date.now()}`,name:S.name,wholesaleCost:S.wholesaleCost,quantity:q,type:S.type,retailPrice:I,totalWholesale:V,totalRetail:se},lt=[...l,ot];if(c(lt),d(""),de(!1),a){const kt=lt.map(Ce=>({id:Ce.id,name:Ce.name,wholesaleCost:Ce.wholesaleCost,quantity:Ce.quantity,type:Ce.type}));a(kt)}},_=S=>{const q=[];let J=[];if(S.ingredients.forEach(I=>{const V=n.find(se=>se.name.toLowerCase().includes(I.name.toLowerCase())||I.name.toLowerCase().includes(se.name.toLowerCase()));if(V){const se=s[I.type],ot=V.wholesaleCost*se,lt=V.wholesaleCost*I.quantity,kt=ot*I.quantity,Ce={id:`recipe-item-${Date.now()}-${Math.random()}`,name:I.name,wholesaleCost:V.wholesaleCost,quantity:I.quantity,type:I.type,retailPrice:ot,totalWholesale:lt,totalRetail:kt};q.push(Ce)}else J.push(I.name)}),J.length>0){alert(`Missing ingredients in your library: ${J.join(", ")}. Please add these items to your product library first.`);return}if(c([...l,...q]),x(S.name),ge(""),fe(!1),a){const I=[...l,...q].map(V=>({id:V.id,name:V.name,wholesaleCost:V.wholesaleCost,quantity:V.quantity,type:V.type}));a(I)}},$=(S,q)=>{if(q<=0){z(S);return}const J=l.map(I=>{if(I.id===S){const V=I.wholesaleCost*q,se=I.retailPrice*q;return O(P({},I),{quantity:q,totalWholesale:V,totalRetail:se})}return I});if(c(J),a){const I=J.map(V=>({id:V.id,name:V.name,wholesaleCost:V.wholesaleCost,quantity:V.quantity,type:V.type}));a(I)}},W=(S,q)=>{c(l.map(J=>{if(J.id===S){const I=q*J.quantity;return O(P({},J),{retailPrice:q,totalRetail:I})}return J}))},z=S=>{const q=l.filter(J=>J.id!==S);if(c(q),a){const J=q.map(I=>({id:I.id,name:I.name,wholesaleCost:I.wholesaleCost,quantity:I.quantity,type:I.type}));a(J)}},te=()=>{c([]),x(""),m(""),y(""),M(""),ae("custom"),ge(""),d(""),a&&a([])};C.useEffect(()=>(typeof window!="undefined"&&(window.clearCurrentOrder=te),()=>{typeof window!="undefined"&&delete window.clearCurrentOrder}),[]);const De=S=>{var J;const q=(J=S.target.files)==null?void 0:J[0];if(q){const I=new FileReader;I.onload=V=>{var se;y((se=V.target)==null?void 0:se.result)},I.readAsDataURL(q)}},Q=()=>{if(!u.trim()||l.length===0){u.trim()?alert("Please add at least one item to the order."):alert("Please enter an order name before saving.");return}if(i==="staff"&&!b.trim()){alert("Please enter your name before saving the order.");return}console.log("Creating order with items:",l),console.log("Current POS settings:",o);const S=l.reduce((V,se)=>V+se.totalWholesale,0),q=l.reduce((V,se)=>V+se.totalRetail,0),J=q-S,I={id:Date.now().toString(),name:u,date:new Date,products:l.map(V=>({id:V.id,name:V.name,wholesaleCost:V.wholesaleCost,quantity:V.quantity,type:V.type})),totalWholesale:S,totalRetail:q,profit:J,photo:w||void 0,notes:v||void 0,staffName:b||void 0,staffId:k||void 0};console.log("Final order object:",I),r(I),i==="staff"?(console.log("Staff mode - checking store configuration:",o.isConfigured,o.storeName),o.isConfigured&&o.storeName?(N(I),B(!0)):alert(`Store not configured. Please contact your manager to set up store information.
        
Debug info:
- isConfigured: ${o.isConfigured}
- storeName: ${o.storeName}`)):setTimeout(()=>{te()},100)},pe=l.reduce((S,q)=>S+q.totalWholesale,0),Y=l.reduce((S,q)=>S+q.totalRetail,0),Le=Y-pe,yr=S=>{switch(S){case"stem":return"bg-green-100 text-green-800";case"vase":return"bg-blue-100 text-blue-800";case"accessory":return"bg-purple-100 text-purple-800";case"other":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:i==="staff"?"Create Arrangement":"Create New Order"}),i==="staff"&&e.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-semibold px-2 py-1 rounded-full",children:"STAFF MODE"})]}),i==="staff"&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-purple-800 mb-4",children:"Customer Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Customer's Budget ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:U,onChange:S=>M(S.target.value),className:"w-full px-3 py-2 border border-purple-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., 75.00"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"This will be used for budget tracking in Staff Training Mode"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Arrangement Type"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"arrangementMode",value:"custom",checked:R==="custom",onChange:S=>ae(S.target.value),className:"mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Designer's Choice (Custom)"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"arrangementMode",value:"recipe",checked:R==="recipe",onChange:S=>ae(S.target.value),className:"mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Use Existing Recipe"})]})]})]})]})]}),L&&he&&e.jsx(wo,{order:he,posSettings:o,onClose:()=>{B(!1),N(null)}}),e.jsxs("div",{className:`mb-6 ${i==="staff"?"grid grid-cols-1":"grid grid-cols-1 lg:grid-cols-2 gap-6"}`,children:[(i!=="staff"||R==="recipe")&&e.jsxs("div",{className:i==="staff"?"mb-6":"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i==="staff"?" Select Recipe to Customize":" Add Arrangement Recipe"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ft,{className:"w-4 h-4 text-gray-400 absolute left-3"}),e.jsx("input",{type:"text",value:ee,onChange:S=>{ge(S.target.value),fe(S.target.value.length>0)},onFocus:()=>fe(ee.length>0),className:"w-full pl-10 pr-4 py-2 border border-emerald-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:i==="staff"?"Search recipes to start with...":"Search arrangement recipes..."})]}),je&&f.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:f.map(S=>{const q=S.ingredients.reduce((J,I)=>J+I.quantity,0);return e.jsx("div",{onClick:()=>_(S),className:"p-3 hover:bg-emerald-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:S.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[q," items  Website: $",S.websitePrice.toFixed(2)]}),e.jsx("div",{className:"text-xs text-emerald-600",children:i==="staff"?"Click to start with this recipe (you can modify)":"Click to add all ingredients to order"})]}),S.photo&&e.jsx("img",{src:S.photo,alt:S.name,className:"w-12 h-12 object-cover rounded-md"})]})},S.id)})})]})]}),(i!=="staff"||R==="custom")&&e.jsxs("div",{className:i==="staff"?"mb-6":"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i==="staff"?" Build Custom Arrangement":" Add Individual Products"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ft,{className:"w-4 h-4 text-gray-400 absolute left-3"}),e.jsx("input",{type:"text",value:h,onChange:S=>{d(S.target.value),de(S.target.value.trim().length>0)},onFocus:()=>de(h.trim().length>0),onBlur:()=>setTimeout(()=>de(!1),300),className:"w-full pl-10 pr-4 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i==="staff"?"Search flowers, vases, accessories...":"Search individual products..."})]}),we&&h.trim().length>0&&p.length===0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg p-3",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No products found. Try a different search term."})}),we&&h.trim().length>0&&p.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:p.map(S=>{const q=S.inventoryCount!==void 0,J=q&&S.lowStockThreshold!==void 0&&S.inventoryCount<=S.lowStockThreshold,I=q&&S.inventoryCount===0;return e.jsx("div",{onClick:()=>!I&&j(S),className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 ${I?"opacity-50 cursor-not-allowed":""}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium text-gray-800",children:S.name}),q&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${I?"bg-red-100 text-red-800":J?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:I?"Out of Stock":`${S.inventoryCount} in stock`})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["$",S.wholesaleCost.toFixed(2),"  ",S.type]})]}),e.jsxs("div",{className:"text-sm text-blue-600",children:["$",(S.wholesaleCost*s[S.type]).toFixed(2)," retail"]})]})},S.id)})})]})]})]}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Order Items"}),e.jsx("div",{className:"space-y-3",children:l.map(S=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:S.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${yr(S.type)}`,children:S.type})]}),e.jsx("button",{onClick:()=>z(S.id),className:"text-red-500 hover:text-red-700",children:e.jsx(pt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-1",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(S.id,S.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300",children:e.jsx(Ca,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-12 text-center font-medium",children:S.quantity}),e.jsx("button",{onClick:()=>$(S.id,S.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300",children:e.jsx(Re,{className:"w-3 h-3"})})]})]}),i!=="staff"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-1",children:"Wholesale Cost"}),e.jsxs("div",{className:"font-medium",children:["$",S.wholesaleCost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-1",children:i==="staff"?"Price Each":"Retail Price (Editable)"}),i==="staff"?e.jsxs("div",{className:"font-medium",children:["$",S.retailPrice.toFixed(2)]}):e.jsx("input",{type:"number",step:"0.01",min:"0",value:S.retailPrice.toFixed(2),onChange:q=>W(S.id,parseFloat(q.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-600 mb-1",children:i==="staff"?"Total Cost":"Total Retail"}),e.jsxs("div",{className:"font-bold text-blue-600",children:["$",S.totalRetail.toFixed(2)]})]})]})]},S.id))}),e.jsxs("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Order Summary"}),e.jsxs("div",{className:`grid gap-4 text-sm ${i==="staff"?"grid-cols-1":"grid-cols-3"}`,children:[i!=="staff"&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Wholesale:"}),e.jsxs("div",{className:"font-medium",children:["$",pe.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:i==="staff"?"Total Order Cost:":"Total Retail:"}),e.jsxs("div",{className:"font-medium text-blue-600",children:["$",Y.toFixed(2)]})]}),i!=="staff"&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Profit:"}),e.jsxs("div",{className:"font-bold text-green-700",children:["$",Le.toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 p-4 rounded-lg border-2 ${i==="staff"?"bg-purple-50 border-purple-300":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i==="staff"?"Your Name *":"Staff Member Name"}),e.jsx("input",{type:"text",value:b,onChange:S=>T(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i==="staff"?"Enter your name":"Staff member who created this order"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i==="staff"?"Your Employee ID (Optional)":"Staff ID (Optional)"}),e.jsx("input",{type:"text",value:k,onChange:S=>E(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i==="staff"?"Your employee ID":"Employee ID"})]}),i==="staff"&&e.jsxs("div",{className:"col-span-2 text-sm text-purple-700 bg-purple-100 p-2 rounded",children:[" ",e.jsx("strong",{children:"Your info will be included in all order records"})," - This helps track who created each arrangement for training and accountability."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Name *"}),e.jsx("input",{type:"text",value:u,onChange:S=>x(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Wedding Centerpieces - Smith",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:v,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Additional notes about this order..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:De,className:"hidden"})]}),w&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w,alt:"Order preview",className:"w-16 h-16 object-cover rounded-md"}),e.jsx("button",{onClick:()=>y(""),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:""})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Q,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),i==="staff"?"Save & Send to POS":"Save Order"]}),e.jsx("button",{onClick:te,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Clear"})]})]})]}),l.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(be,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:i==="staff"?R==="custom"?"Start typing to search for products and create your custom arrangement":"Search for a recipe above to start with, then customize as needed":"Start typing to search for products in your library"}),i==="staff"&&e.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg max-w-md mx-auto",children:[e.jsxs("h4",{className:"font-medium text-purple-800 mb-2",children:[" ",R==="custom"?"Designer's Choice Tips:":"Recipe Customization Tips:"]}),e.jsx("ul",{className:"text-sm text-purple-700 text-left space-y-1",children:R==="custom"?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:' Search for "roses", "carnations", "vase", etc.'}),e.jsx("li",{children:" Add products one by one to build your arrangement"}),e.jsx("li",{children:" Watch the Staff Training budget tracker"}),e.jsx("li",{children:" Adjust quantities to meet customer's budget"})]}):e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Start with a recipe, then modify as needed"}),e.jsx("li",{children:" Add or remove items to fit customer's budget"}),e.jsx("li",{children:" Adjust quantities to personalize the arrangement"}),e.jsx("li",{children:" Use recipes as inspiration, not strict rules"})]})})]})]})]})},No=({templates:n,markupSettings:t,onUpdateTemplate:s,onDeleteTemplate:r})=>{const[a,i]=C.useState(""),[o,l]=C.useState("all"),[c,h]=C.useState(null),[d,u]=C.useState({name:"",wholesaleCost:"",type:"stem",inventoryCount:"",lowStockThreshold:""}),x=[...n].filter(b=>{const T=b.name.toLowerCase().includes(a.toLowerCase()),k=o==="all"||b.type===o;return T&&k}).sort((b,T)=>b.name.toLowerCase().localeCompare(T.name.toLowerCase())),v=b=>{h(b.id),u({name:b.name,wholesaleCost:b.wholesaleCost.toString(),type:b.type,inventoryCount:b.inventoryCount!==void 0?b.inventoryCount.toString():"",lowStockThreshold:b.lowStockThreshold!==void 0?b.lowStockThreshold.toString():""})},m=()=>{if(c){if(!d.name.trim()||!d.wholesaleCost||parseFloat(d.wholesaleCost)<=0){alert("Please enter a valid product name and wholesale cost.");return}s(c,{name:d.name.trim(),wholesaleCost:parseFloat(d.wholesaleCost),type:d.type,inventoryCount:d.inventoryCount!==""?parseInt(d.inventoryCount):void 0,lowStockThreshold:d.lowStockThreshold!==""?parseInt(d.lowStockThreshold):void 0}),h(null),u({name:"",wholesaleCost:"",type:"stem",inventoryCount:"",lowStockThreshold:""})}},w=()=>{h(null),u({name:"",wholesaleCost:"",type:"stem",inventoryCount:"",lowStockThreshold:""})},y=b=>{switch(b){case"stem":return"bg-green-100 text-green-800";case"vase":return"bg-blue-100 text-blue-800";case"accessory":return"bg-purple-100 text-purple-800";case"other":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return n.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Et,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Product Library"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Et,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Your product library is empty. Add products to build your library automatically."})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Et,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Product Library"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",x.length," of ",n.length," items)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ft,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"}),e.jsx("input",{type:"text",value:a,onChange:b=>i(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Search products..."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ya,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"}),e.jsxs("select",{value:o,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"stem",children:"Stems Only"}),e.jsx("option",{value:"vase",children:"Vases Only"}),e.jsx("option",{value:"accessory",children:"Accessories Only"}),e.jsx("option",{value:"other",children:"Other Items"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(b=>e.jsx("div",{id:`template-${b.id}`,className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-300",children:c===b.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:d.name,onChange:T=>u(O(P({},d),{name:T.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsxs("select",{value:d.type,onChange:T=>u(O(P({},d),{type:T.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"stem",children:"Stem"}),e.jsx("option",{value:"vase",children:"Vase"}),e.jsx("option",{value:"accessory",children:"Accessory"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:d.wholesaleCost,onChange:T=>u(O(P({},d),{wholesaleCost:T.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",min:"0",value:d.inventoryCount,onChange:T=>u(O(P({},d),{inventoryCount:T.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Inventory"}),e.jsx("input",{type:"number",min:"0",value:d.lowStockThreshold,onChange:T=>u(O(P({},d),{lowStockThreshold:T.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Low Stock"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:m,className:"flex-1 bg-green-600 text-white py-1 px-2 rounded text-sm hover:bg-green-700 transition-colors",children:"Save"}),e.jsx("button",{onClick:w,className:"flex-1 bg-gray-500 text-white py-1 px-2 rounded text-sm hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-800 text-sm",children:b.name}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>v(b),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Edit template",children:e.jsx(ea,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>r(b.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete template",children:e.jsx(Ze,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${y(b.type)}`,children:b.type})}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Wholesale:"}),e.jsxs("span",{className:"font-medium",children:["$",b.wholesaleCost.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Retail Price:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["$",(b.wholesaleCost*t[b.type]).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Markup:"}),e.jsxs("span",{className:"text-blue-600",children:[t[b.type],"x"]})]}),b.inventoryCount!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"In Stock:"}),e.jsxs("span",{className:`font-medium ${b.lowStockThreshold&&b.inventoryCount<=b.lowStockThreshold||b.inventoryCount===0?"text-red-600":"text-gray-700"}`,children:[b.inventoryCount,b.inventoryCount===0&&" (Out of Stock)",b.lowStockThreshold&&b.inventoryCount<=b.lowStockThreshold&&b.inventoryCount>0&&" (Low Stock)"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[e.jsx(zt,{className:"w-3 h-3"}),e.jsxs("span",{children:["Last used: ",b.lastUsed.toLocaleDateString()]})]}),e.jsx("div",{className:"text-center text-xs text-gray-500 bg-gray-50 py-2 rounded",children:'Use "Create New Order" to add this product'})]})},b.id))})]})},_o=({onAddProduct:n,existingTemplates:t})=>{var o;const[s,r]=C.useState({name:"",wholesaleCost:"",quantity:"1",type:"stem",inventoryCount:"",lowStockThreshold:""}),a=t.find(l=>l.name.toLowerCase()===s.name.toLowerCase().trim()&&l.type===s.type),i=l=>{l.preventDefault();const c=s.wholesaleCost||(a==null?void 0:a.wholesaleCost.toString())||"";if(!s.name||!c){alert("Please enter a product name and wholesale cost.");return}const h=parseInt(s.quantity);let d;a?d=(a.inventoryCount||0)+h:d=s.inventoryCount!==""?parseInt(s.inventoryCount):0,n({name:s.name.trim(),wholesaleCost:parseFloat(c),quantity:h,type:s.type,inventoryCount:d,lowStockThreshold:s.lowStockThreshold!==""?parseInt(s.lowStockThreshold):a==null?void 0:a.lowStockThreshold}),r({name:"",wholesaleCost:"",quantity:"1",type:"stem",inventoryCount:"",lowStockThreshold:""})};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Re,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Add New Product"})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),e.jsx("input",{type:"text",value:s.name,onChange:l=>r(O(P({},s),{name:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., Red Roses",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:s.type,onChange:l=>r(O(P({},s),{type:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"stem",children:"Stem"}),e.jsx("option",{value:"vase",children:"Vase"}),e.jsx("option",{value:"accessory",children:"Accessory"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Cost ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:s.wholesaleCost||(a==null?void 0:a.wholesaleCost)||"",onChange:l=>r(O(P({},s),{wholesaleCost:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:a?a.wholesaleCost.toFixed(2):"0.00",required:!a}),a&&!s.wholesaleCost&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: $",a.wholesaleCost.toFixed(2)]})]}),!a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Starting Inventory Count"}),e.jsx("input",{type:"number",min:"0",value:s.inventoryCount,onChange:l=>r(O(P({},s),{inventoryCount:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How many units do you currently have in stock?"})]}),a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity to Add to Inventory"}),e.jsx("input",{type:"number",min:"1",value:s.quantity,onChange:l=>r(O(P({},s),{quantity:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add more units to existing inventory"})]}),a&&e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"This product already exists!"}),e.jsx("br",{}),"Current inventory: ",e.jsx("strong",{children:a.inventoryCount||0})," units",e.jsx("br",{}),"Adding ",e.jsx("strong",{children:s.quantity})," units will result in ",e.jsx("strong",{children:(a.inventoryCount||0)+parseInt(s.quantity||"0")})," total units"]})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Stock Alert (Optional)"}),e.jsx("input",{type:"number",min:"0",value:s.lowStockThreshold||(a==null?void 0:a.lowStockThreshold)||"",onChange:l=>r(O(P({},s),{lowStockThreshold:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:((o=a==null?void 0:a.lowStockThreshold)==null?void 0:o.toString())||"5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get notified when stock falls below this number"}),a&&a.lowStockThreshold&&!s.lowStockThreshold&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.lowStockThreshold]})]})]}),e.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),a?"Update Product & Add to Inventory":"Add Product to Library"]})]})]})},ko=({markupSettings:n,onMarkupChange:t})=>{const[s,r]=C.useState(n),[a,i]=C.useState(!1);C.useEffect(()=>{r(n),i(!1)},[n]);const o=(c,h)=>{const d=parseFloat(h)||0,u=O(P({},s),{[c]:d});r(u),i(!0)},l=()=>{console.log("MarkupSettings: handleSave called with:",s);try{t(s),i(!1),console.log("MarkupSettings: Settings saved successfully"),alert("Markup settings saved successfully!")}catch(c){console.error("MarkupSettings: Error saving settings:",c),alert("Error saving markup settings. Please try again.")}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(is,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Markup Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stems Markup"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",min:"1",value:s.stem,onChange:c=>o("stem",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vases Markup"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",min:"1",value:s.vase,onChange:c=>o("vase",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accessories Markup"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",min:"1",value:s.accessory,onChange:c=>o("accessory",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Items Markup"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.1",min:"1",value:s.other,onChange:c=>o("other",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-sm",children:"x"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsxs("button",{onClick:l,disabled:!a,className:"bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ns,{className:"w-4 h-4"}),"Save Markup Settings"]}),a&&e.jsx("span",{className:"text-sm text-amber-600",children:"You have unsaved changes"})]}),e.jsx("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-purple-700",children:[e.jsx("strong",{children:"Markup multipliers"})," determine your retail pricing. For example, a 2.5x markup on a $4 wholesale stem = $10 retail price."]})})]})},So=({orders:n,onDeleteOrder:t})=>{const[s,r]=C.useState(""),[a,i]=C.useState("date"),[o,l]=C.useState(null);if(n.length===0)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pt,{className:"w-5 h-5 text-teal-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Saved Orders"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No saved orders yet. Save your first order to keep records."})]})]});const c=[...n].filter(h=>h.name.toLowerCase().includes(s.toLowerCase())).sort((h,d)=>{switch(a){case"name":return h.name.toLowerCase().localeCompare(d.name.toLowerCase());case"profit":return d.profit-h.profit;case"date":default:return new Date(d.date).getTime()-new Date(h.date).getTime()}});return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pt,{className:"w-5 h-5 text-teal-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Saved Orders"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",c.length," of ",n.length," orders)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ft,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"}),e.jsx("input",{type:"text",value:s,onChange:h=>r(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500",placeholder:"Search orders..."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Wr,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"}),e.jsxs("select",{value:a,onChange:h=>i(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 appearance-none",children:[e.jsx("option",{value:"date",children:"Sort by Date (Newest)"}),e.jsx("option",{value:"name",children:"Sort by Name (A-Z)"}),e.jsx("option",{value:"profit",children:"Sort by Profit (Highest)"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(h=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-800 text-sm line-clamp-2",children:h.name}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>l(h),className:"text-gray-400 hover:text-teal-600 transition-colors",title:"View details",children:e.jsx(Gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(h.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete order",children:e.jsx(Ze,{className:"w-4 h-4"})})]})]}),h.photo&&e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:h.photo,alt:h.name,className:"w-full h-24 object-cover rounded-md"})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(gt,{className:"w-3 h-3"}),e.jsx("span",{children:h.date.toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Ie,{className:"w-3 h-3"}),e.jsxs("span",{children:["Profit: $",h.profit.toFixed(2)]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[h.products.length," items  $",h.totalRetail.toFixed(2)," retail"]})]})]},h.id))}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:o.name}),e.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("span",{className:"text-2xl",children:""})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:o.date.toLocaleDateString()})]})}),o.photo&&e.jsx("div",{children:e.jsx("img",{src:o.photo,alt:o.name,className:"w-full max-w-md mx-auto rounded-lg"})}),o.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 text-sm bg-gray-50 p-3 rounded-md",children:o.notes})]}),o.staffName&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Staff Information"}),e.jsxs("div",{className:"text-gray-600 text-sm bg-gray-50 p-3 rounded-md",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",o.staffName]}),o.staffId&&e.jsxs("div",{children:[e.jsx("strong",{children:"Employee ID:"})," ",o.staffId]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Wholesale:"}),e.jsxs("div",{className:"font-medium",children:["$",o.totalWholesale.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Retail:"}),e.jsxs("div",{className:"font-medium text-green-600",children:["$",o.totalRetail.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Profit:"}),e.jsxs("div",{className:"font-bold text-green-700",children:["$",o.profit.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 mb-3",children:["Products (",o.products.length," items)"]}),e.jsx("div",{className:"space-y-2",children:o.products.map((h,d)=>e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-md text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:h.name}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",h.type,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{children:["Qty: ",h.quantity]}),e.jsxs("div",{className:"text-gray-600",children:["$",h.wholesaleCost.toFixed(2)," each"]})]})]},d))})]})]})]})})})]})},Co=({recipes:n,templates:t,markupSettings:s,onSaveRecipe:r,onDeleteRecipe:a,onUpdateRecipe:i})=>{const[o,l]=C.useState(!1),[c,h]=C.useState(null),[d,u]=C.useState(null),[x,v]=C.useState({name:"",description:"",websitePrice:"",websiteUrl:"",photo:"",ingredients:[]}),[m,w]=C.useState({name:"",description:"",websitePrice:"",websiteUrl:"",photo:"",ingredients:[]}),[y,b]=C.useState({name:"",quantity:"1",type:"stem",notes:""}),[T,k]=C.useState({name:"",quantity:"1",type:"stem",notes:""}),E=N=>{let L=0,B=0,p=[];N.ingredients.forEach($=>{const W=t.find(z=>z.name.toLowerCase().includes($.name.toLowerCase())||$.name.toLowerCase().includes(z.name.toLowerCase()));if(W){const z=W.wholesaleCost*$.quantity,te=s[$.type],De=W.wholesaleCost*te*$.quantity;L+=z,B+=De}else p.push($.name)});const f=B-L,j=N.websitePrice-L,_=j-f;return{totalWholesale:L,totalRetail:B,profit:f,websiteProfit:j,profitDifference:_,missingItems:p,canCalculate:p.length===0}},U=()=>{y.name&&(v(O(P({},x),{ingredients:[...x.ingredients,{name:y.name,quantity:parseInt(y.quantity),type:y.type,notes:y.notes||void 0}]})),b({name:"",quantity:"1",type:"stem",notes:""}))},M=N=>{v(O(P({},x),{ingredients:x.ingredients.filter((L,B)=>B!==N)}))},R=N=>{var B;const L=(B=N.target.files)==null?void 0:B[0];if(L){const p=new FileReader;p.onload=f=>{var j;v(O(P({},x),{photo:(j=f.target)==null?void 0:j.result}))},p.readAsDataURL(L)}},ae=()=>{var N,L;if(!x.name||x.ingredients.length===0){alert("Please enter a recipe name and add at least one ingredient.");return}try{const B={id:Date.now().toString(),name:x.name.trim(),description:((N=x.description)==null?void 0:N.trim())||void 0,websitePrice:parseFloat(x.websitePrice)||0,websiteUrl:((L=x.websiteUrl)==null?void 0:L.trim())||void 0,photo:x.photo||void 0,ingredients:x.ingredients.map(p=>{var f;return O(P({},p),{name:p.name.trim(),notes:((f=p.notes)==null?void 0:f.trim())||void 0})}),lastUpdated:new Date};r(B),v({name:"",description:"",websitePrice:"",websiteUrl:"",photo:"",ingredients:[]}),l(!1)}catch(B){console.error("Error creating recipe:",B),alert("Error saving recipe. Please check your data and try again.")}},ee=N=>{h(N.id),w({name:N.name,description:N.description||"",websitePrice:N.websitePrice.toString(),websiteUrl:N.websiteUrl||"",photo:N.photo||"",ingredients:[...N.ingredients]})},ge=()=>{if(!m.name||m.ingredients.length===0){alert("Please enter a recipe name and add at least one ingredient.");return}const N={name:m.name,description:m.description||void 0,websitePrice:parseFloat(m.websitePrice)||0,websiteUrl:m.websiteUrl||void 0,photo:m.photo||void 0,ingredients:m.ingredients,lastUpdated:new Date};i(c,N),h(null)},we=()=>{h(null),w({name:"",description:"",websitePrice:"",websiteUrl:"",photo:"",ingredients:[]})},de=()=>{T.name&&(w(O(P({},m),{ingredients:[...m.ingredients,{name:T.name,quantity:parseInt(T.quantity),type:T.type,notes:T.notes||void 0}]})),k({name:"",quantity:"1",type:"stem",notes:""}))},je=N=>{w(O(P({},m),{ingredients:m.ingredients.filter((L,B)=>B!==N)}))},fe=N=>{var B;const L=(B=N.target.files)==null?void 0:B[0];if(L){const p=new FileReader;p.onload=f=>{var j;w(O(P({},m),{photo:(j=f.target)==null?void 0:j.result}))},p.readAsDataURL(L)}},he=N=>{switch(N){case"stem":return"bg-green-100 text-green-800";case"vase":return"bg-blue-100 text-blue-800";case"accessory":return"bg-purple-100 text-purple-800";case"other":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5 text-emerald-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Arrangement Recipes"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",n.length," recipes)"]})]}),e.jsxs("button",{onClick:()=>l(!o),className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Add Recipe"]})]}),o&&e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-6 mb-6 border border-emerald-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Create New Arrangement Recipe"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arrangement Name *"}),e.jsx("input",{type:"text",value:x.name,onChange:N=>v(O(P({},x),{name:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"e.g., Spring Garden Bouquet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:x.websitePrice,onChange:N=>v(O(P({},x),{websitePrice:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:x.description,onChange:N=>v(O(P({},x),{description:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",rows:2,placeholder:"Brief description of the arrangement..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL (Optional)"}),e.jsx("input",{type:"url",value:x.websiteUrl,onChange:N=>v(O(P({},x),{websiteUrl:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"https://yourwebsite.com/arrangements/spring-garden"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]}),x.photo&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x.photo,alt:"Recipe preview",className:"w-16 h-16 object-cover rounded-md"}),e.jsx("button",{onClick:()=>v(O(P({},x),{photo:""})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:""})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Recipe Ingredients"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 mb-3",children:[e.jsx("input",{type:"text",value:y.name,onChange:N=>b(O(P({},y),{name:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Ingredient name"}),e.jsx("input",{type:"number",min:"1",value:y.quantity,onChange:N=>b(O(P({},y),{quantity:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Qty"}),e.jsxs("select",{value:y.type,onChange:N=>b(O(P({},y),{type:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"stem",children:"Stem"}),e.jsx("option",{value:"vase",children:"Vase"}),e.jsx("option",{value:"accessory",children:"Accessory"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsx("input",{type:"text",value:y.notes,onChange:N=>b(O(P({},y),{notes:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Notes (optional)"}),e.jsx("button",{onClick:U,className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors",children:"Add"})]}),x.ingredients.length>0&&e.jsx("div",{className:"space-y-2",children:x.ingredients.map((N,L)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:N.name}),e.jsxs("span",{className:"text-gray-500",children:["x",N.quantity]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(N.type)}`,children:N.type}),N.notes&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",N.notes,")"]})]}),e.jsx("button",{onClick:()=>M(L),className:"text-red-500 hover:text-red-700",children:e.jsx(Ze,{className:"w-4 h-4"})})]},L))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ae,className:"bg-emerald-600 text-white px-6 py-2 rounded-md hover:bg-emerald-700 transition-colors",children:"Save Recipe"}),e.jsx("button",{onClick:()=>l(!1),className:"bg-gray-500 text-white px-6 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}),c&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Edit Arrangement Recipe"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arrangement Name *"}),e.jsx("input",{type:"text",value:m.name,onChange:N=>w(O(P({},m),{name:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spring Garden Bouquet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:m.websitePrice,onChange:N=>w(O(P({},m),{websitePrice:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:m.description,onChange:N=>w(O(P({},m),{description:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Brief description of the arrangement..."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website URL (Optional)"}),e.jsx("input",{type:"url",value:m.websiteUrl,onChange:N=>w(O(P({},m),{websiteUrl:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://yourwebsite.com/arrangements/spring-garden"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:fe,className:"hidden"})]}),m.photo&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.photo,alt:"Recipe preview",className:"w-16 h-16 object-cover rounded-md"}),e.jsx("button",{onClick:()=>w(O(P({},m),{photo:""})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:""})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Recipe Ingredients"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 mb-3",children:[e.jsx("input",{type:"text",value:T.name,onChange:N=>k(O(P({},T),{name:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingredient name"}),e.jsx("input",{type:"number",min:"1",value:T.quantity,onChange:N=>k(O(P({},T),{quantity:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Qty"}),e.jsxs("select",{value:T.type,onChange:N=>k(O(P({},T),{type:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"stem",children:"Stem"}),e.jsx("option",{value:"vase",children:"Vase"}),e.jsx("option",{value:"accessory",children:"Accessory"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsx("input",{type:"text",value:T.notes,onChange:N=>k(O(P({},T),{notes:N.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notes (optional)"}),e.jsx("button",{onClick:de,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Add"})]}),m.ingredients.length>0&&e.jsx("div",{className:"space-y-2",children:m.ingredients.map((N,L)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-md border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:N.name}),e.jsxs("span",{className:"text-gray-500",children:["x",N.quantity]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(N.type)}`,children:N.type}),N.notes&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",N.notes,")"]})]}),e.jsx("button",{onClick:()=>je(L),className:"text-red-500 hover:text-red-700",children:e.jsx(Ze,{className:"w-4 h-4"})})]},L))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:ge,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Save Changes"]}),e.jsxs("button",{onClick:we,className:"bg-gray-500 text-white px-6 py-2 rounded-md hover:bg-gray-600 transition-colors flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4"}),"Cancel"]})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No arrangement recipes yet. Add your first recipe to start analyzing costs."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(N=>{const L=E(N);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:N.name}),N.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:N.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Website: $",N.websitePrice.toFixed(2)]}),e.jsxs("span",{children:[N.ingredients.length," ingredients"]}),N.websiteUrl&&e.jsxs("a",{href:N.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:text-emerald-700 flex items-center gap-1",children:[e.jsx(oa,{className:"w-3 h-3"}),"View"]})]})]}),N.photo&&e.jsx("img",{src:N.photo,alt:N.name,className:"w-20 h-20 object-cover rounded-md ml-4"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Cost Analysis"]}),L.canCalculate?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Your Wholesale:"}),e.jsxs("div",{className:"font-medium",children:["$",L.totalWholesale.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Your Retail:"}),e.jsxs("div",{className:"font-medium text-green-600",children:["$",L.totalRetail.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Your Profit:"}),e.jsxs("div",{className:"font-medium text-blue-600",children:["$",L.profit.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Website Profit:"}),e.jsxs("div",{className:`font-medium ${L.websiteProfit>=0?"text-green-600":"text-red-600"}`,children:["$",L.websiteProfit.toFixed(2)]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-600",children:"Profit Difference:"}),e.jsxs("div",{className:`font-bold ${L.profitDifference>=0?"text-green-600":"text-red-600"}`,children:["$",L.profitDifference>=0?"+":"","$",L.profitDifference.toFixed(2),L.profitDifference>=0?" (Website pays more)":" (Your price is better)"]})]})]}):e.jsxs("div",{className:"text-amber-600 text-sm",children:[e.jsx("p",{className:"mb-2",children:" Missing price data for:"}),e.jsx("ul",{className:"list-disc list-inside",children:L.missingItems.map((B,p)=>e.jsx("li",{children:B},p))}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"Add these items to your product library to calculate costs."})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Ingredients"}),e.jsx("div",{className:"space-y-1",children:N.ingredients.map((B,p)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:B.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(B.type)}`,children:B.type}),B.notes&&e.jsxs("span",{className:"text-gray-500",children:["(",B.notes,")"]})]}),e.jsxs("span",{className:"text-gray-600",children:["x",B.quantity]})]},p))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Updated: ",N.lastUpdated.toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ee(N),className:"text-blue-600 hover:text-blue-700 text-sm flex items-center gap-1",children:[e.jsx(Oa,{className:"w-3 h-3"}),"Edit"]}),e.jsxs("button",{onClick:()=>u(N),className:"text-emerald-600 hover:text-emerald-700 text-sm flex items-center gap-1",children:[e.jsx(Ot,{className:"w-3 h-3"}),"Analyze"]}),e.jsxs("button",{onClick:()=>a(N.id),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[e.jsx(Ze,{className:"w-3 h-3"}),"Delete"]})]})]})]},N.id)})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:d.name}),e.jsx("p",{className:"text-gray-600",children:"Detailed Cost Analysis"})]}),e.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("span",{className:"text-2xl",children:""})})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ot,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Detailed analysis view coming soon..."})]})]})})})]})},To=({orders:n})=>{const t=C.useMemo(()=>{if(n.length===0)return null;const r=n.reduce((y,b)=>y+b.totalRetail,0),a=n.reduce((y,b)=>y+b.totalWholesale,0),i=r-a,o=r>0?i/r*100:0,l=r/n.length,c=new Map;n.forEach(y=>{y.products.forEach(b=>{const T=`${b.name}-${b.type}`,k=c.get(T)||{name:b.name,type:b.type,totalQuantity:0,totalRevenue:0,totalCost:0,totalProfit:0,orderCount:0},E=b.wholesaleCost*b.quantity,U=E*2.5;k.totalQuantity+=b.quantity,k.totalCost+=E,k.totalRevenue+=U,k.totalProfit+=U-E,k.orderCount+=1,c.set(T,k)})});const h=Array.from(c.values()).sort((y,b)=>b.totalProfit-y.totalProfit).slice(0,10),d=Array.from(c.values()).sort((y,b)=>b.totalQuantity-y.totalQuantity).slice(0,5),u=new Map,x=new Date;x.setMonth(x.getMonth()-6),n.filter(y=>y.date>=x).forEach(y=>{const b=y.date.toLocaleDateString("en-US",{year:"numeric",month:"short"}),T=u.get(b)||{month:b,revenue:0,profit:0,orderCount:0};T.revenue+=y.totalRetail,T.profit+=y.profit,T.orderCount+=1,u.set(b,T)});const v=Array.from(u.values()).sort((y,b)=>new Date(y.month).getTime()-new Date(b.month).getTime()),m=n.reduce((y,b)=>b.profit>y.profit?b:y),w=n.reduce((y,b)=>b.profit<y.profit?b:y);return{totalRevenue:r,totalCosts:a,totalProfit:i,avgProfitMargin:o,avgOrderValue:l,topProducts:h,topByQuantity:d,monthlyTrends:v,bestOrder:m,worstOrder:w,totalOrders:n.length}},[n]);if(!t)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(me,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Profit Analytics"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No orders yet. Save some orders to see profit analytics."})]})]});const s=r=>{switch(r){case"stem":return"bg-green-100 text-green-800";case"vase":return"bg-blue-100 text-blue-800";case"accessory":return"bg-purple-100 text-purple-800";case"other":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(me,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Profit Analytics"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.totalOrders," orders analyzed)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(Ie,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Revenue"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:["$",t.totalRevenue.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(me,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Profit"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:["$",t.totalProfit.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[t.avgProfitMargin.toFixed(1),"% margin"]})]})]})}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:e.jsx(He,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Avg Order Value"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:["$",t.avgOrderValue.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(gt,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Orders"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:t.totalOrders})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-yellow-600"}),"Top Profit Makers"]}),e.jsx("div",{className:"space-y-3",children:t.topProducts.slice(0,5).map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-yellow-100 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold text-yellow-700",children:a+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s(r.type)}`,children:r.type}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.totalQuantity," sold in ",r.orderCount," orders"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",r.totalProfit.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["$",r.totalRevenue.toFixed(2)," revenue"]})]})]},`${r.name}-${r.type}`))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5 text-blue-600"}),"Most Popular Items"]}),e.jsx("div",{className:"space-y-3",children:t.topByQuantity.map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold text-blue-700",children:a+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:r.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s(r.type)}`,children:r.type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-blue-600",children:r.totalQuantity}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r.orderCount," orders"]})]})]},`${r.name}-${r.type}`))})]})]}),t.monthlyTrends.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(gt,{className:"w-5 h-5 text-indigo-600"}),"Monthly Trends (Last 6 Months)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:t.monthlyTrends.map(r=>e.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:r.month}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",r.profit.toFixed(0)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r.orderCount," orders"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["$",r.revenue.toFixed(0)," revenue"]})]},r.month))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-green-600"}),"Most Profitable Order"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-gray-800",children:t.bestOrder.name}),e.jsx("div",{className:"text-sm text-gray-600",children:t.bestOrder.date.toLocaleDateString()}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",t.bestOrder.profit.toFixed(2)," profit"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["$",t.bestOrder.totalRetail.toFixed(2)," revenue  ",t.bestOrder.products.length," items"]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5 text-red-600"}),"Lowest Profit Order"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-gray-800",children:t.worstOrder.name}),e.jsx("div",{className:"text-sm text-gray-600",children:t.worstOrder.date.toLocaleDateString()}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",t.worstOrder.profit.toFixed(2)," profit"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["$",t.worstOrder.totalRetail.toFixed(2)," revenue  ",t.worstOrder.products.length," items"]})]})]})]})]})},Po=({orders:n})=>{if(n.length===0)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ae,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Business Insights"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Save some orders to unlock powerful business insights and recommendations."})]})]});const t=n.reduce((d,u)=>d+u.totalRetail,0),s=n.reduce((d,u)=>d+u.totalWholesale,0),r=t>0?(t-s)/t*100:0,a=t/n.length,i=n.filter(d=>(d.totalRetail>0?d.profit/d.totalRetail*100:0)<40),o=new Map;n.forEach(d=>{d.products.forEach(u=>{const x=`${u.name}-${u.type}`,v=o.get(x)||{profit:0,quantity:0,orders:0},m=u.wholesaleCost*1.5*u.quantity;v.profit+=m,v.quantity+=u.quantity,v.orders+=1,o.set(x,v)})});const l=Array.from(o.entries()).map(([d,u])=>P({name:d},u)).sort((d,u)=>u.profit-d.profit).slice(0,5),c=n.filter(d=>{const u=new Date;return u.setDate(u.getDate()-30),d.date>=u}),h=[{type:"success",icon:st,title:"Strong Performance",message:`Your average profit margin of ${r.toFixed(1)}% is ${r>50?"excellent":r>40?"good":"needs improvement"}`,action:r<40?"Consider reviewing your markup settings":null},{type:i.length>n.length*.3?"warning":"info",icon:Hs,title:"Pricing Opportunities",message:`${i.length} of ${n.length} orders had margins below 40%`,action:i.length>0?"Review these orders for pricing optimization":null},{type:"info",icon:me,title:"Order Trends",message:`${c.length} orders in the last 30 days, averaging $${a.toFixed(2)} per order`,action:c.length<10?"Focus on increasing order frequency":null}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ae,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Business Insights"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",n.length," orders analyzed)"]})]}),e.jsx("div",{className:"space-y-4 mb-8",children:h.map((d,u)=>{const x=d.icon,v={success:"bg-green-50 border-green-200 text-green-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"};return e.jsx("div",{className:`border rounded-lg p-4 ${v[d.type]}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(x,{className:"w-5 h-5 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium mb-1",children:d.title}),e.jsx("p",{className:"text-sm mb-2",children:d.message}),d.action&&e.jsxs("p",{className:"text-xs font-medium",children:[" ",d.action]})]})]})},u)})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5 text-yellow-600"}),"Top Performing Products"]}),e.jsx("div",{className:"space-y-3",children:l.map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-yellow-100 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold text-yellow-700",children:u+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:d.name.split("-")[0]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d.quantity," sold in ",d.orders," orders"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",d.profit.toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:"estimated profit"})]})]},d.name))})]}),e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-indigo-600"}),"Recommendations"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-indigo-600",children:""}),e.jsx("span",{children:"Use Staff Training Mode during busy seasons to maintain consistent margins"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-indigo-600",children:""}),e.jsx("span",{children:"Focus on promoting your top-performing products for higher profits"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-indigo-600",children:""}),e.jsx("span",{children:"Review low-margin orders to identify pricing improvement opportunities"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-indigo-600",children:""}),e.jsx("span",{children:"Create arrangement recipes for your most profitable combinations"})]})]})]})]})},Oo=({products:n,markupSettings:t,targetBudget:s=100,userRole:r="staff"})=>{const[a,i]=C.useState(s),[o,l]=C.useState(!1),c=n.reduce((k,E)=>k+E.wholesaleCost*E.quantity,0),h=n.reduce((k,E)=>{const U=t[E.type],M=E.wholesaleCost*U;return k+M*E.quantity},0),d=h-c,x=a-c<0,v=h>0?d/h*100:0,m=a-h,w=m<0,b=(()=>w?{color:"text-red-600",bg:"bg-red-50",icon:Gt}:m<a*.1?{color:"text-yellow-600",bg:"bg-yellow-50",icon:Gt}:{color:"text-green-600",bg:"bg-green-50",icon:ie})(),T=b.icon;return n.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ve,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Staff Training Mode"})]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ve,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Perfect for training seasonal staff! Add products to see real-time budget tracking."})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Staff Training Mode"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Target Budget:"}),e.jsx("input",{type:"number",value:a,onChange:k=>i(parseFloat(k.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("button",{onClick:()=>l(!o),className:"text-sm text-purple-600 hover:text-purple-700",children:[o?"Hide":"Show"," Profit Details"]})]})]}),e.jsx("div",{className:`${b.bg} border border-opacity-20 rounded-lg p-4 mb-6`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:`w-6 h-6 ${b.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`font-semibold ${b.color}`,children:w?"Over Budget!":m<a*.1?"Budget Warning":"Within Budget"}),e.jsxs("div",{className:`text-2xl font-bold ${b.color}`,children:["$",Math.abs(m).toFixed(2)," ",w?"over":"remaining"]})]}),e.jsx("p",{className:`text-sm ${b.color} mt-1`,children:w?"Remove items or increase budget to stay profitable":m<a*.1?"Close to budget limit - be careful with additional items":"Good! You have room for more items if needed"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsx(Ae,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Target Budget"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:["$",a.toFixed(2)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx(Ie,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Current Order Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:`${b.bg} rounded-lg p-4 text-center`,children:[e.jsx(T,{className:`w-8 h-8 ${b.color} mx-auto mb-2`}),e.jsx("div",{className:`text-sm ${b.color} font-medium`,children:"Status"}),e.jsx("div",{className:`text-2xl font-bold ${b.color}`,children:w?"OVER":"OK"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Budget Usage"}),e.jsxs("span",{children:[(h/a*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${x?"bg-red-500":h/a>.9?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(h/a*100,100)}%`}})})]}),o&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Profit Analysis (Manager View)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Wholesale Cost:"}),e.jsxs("div",{className:"font-medium",children:["$",c.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Retail Price:"}),e.jsxs("div",{className:"font-medium text-green-600",children:["$",h.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Profit:"}),e.jsxs("div",{className:"font-bold text-green-700",children:["$",d.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Margin:"}),e.jsxs("div",{className:"font-bold text-blue-600",children:[v.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("h4",{className:"font-medium text-purple-800 mb-2",children:[" ",r==="staff"?"Your Guidelines":"Staff Instructions"]}),e.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[e.jsx("li",{children:' Keep the "Current Order Cost" under the "Target Budget"'}),e.jsx("li",{children:" Green status = Good to go! You can add more items"}),e.jsx("li",{children:" Yellow status = Getting close, be careful"}),e.jsx("li",{children:" Red status = Over budget! Remove items or ask manager"}),e.jsxs("li",{children:[" ",r==="staff"?"Focus on creating beautiful arrangements within budget":"Train staff to focus on beautiful arrangements within budget"]})]})]})]})},Eo=({posSettings:n,onUpdateSettings:t})=>{const[s,r]=C.useState(n);C.useEffect(()=>{console.log("POSConfiguration: Parent posSettings changed:",n),r(n)},[n]);const a=()=>{if(!s.storeName.trim()){alert("Please enter a store name before saving.");return}const i={storeName:s.storeName.trim(),isConfigured:!0};console.log("POSConfiguration: Saving settings to localStorage:",i),t(i),r(i),alert("Store settings saved successfully!")};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(is,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Store Configuration"}),s.isConfigured&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full",children:"CONFIGURED"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-3",children:"Store Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Store/Business Name *"}),e.jsx("input",{type:"text",value:s.storeName,onChange:i=>r(O(P({},s),{storeName:i.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Bloom & Blossom Florist",required:!0})]})})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-green-800 mb-3",children:"How Staff Orders Work"}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"FlowerCost Pro uses a simple copy/paste system that works with any POS system. No technical setup or integrations required."}),e.jsxs("div",{className:"bg-green-100 border border-green-200 rounded-md p-3",children:[e.jsx("p",{className:"text-sm text-green-800 mb-2",children:e.jsx("strong",{children:"Simple 4-Step Process:"})}),e.jsxs("ol",{className:"text-sm text-green-700 list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Staff creates arrangement in FlowerCost Pro"}),e.jsx("li",{children:"System generates formatted order details with staff name"}),e.jsx("li",{children:'Staff clicks "Copy Order Details" button'}),e.jsx("li",{children:"Staff pastes details into your POS system and processes payment"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-green-100 border border-green-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-green-700",children:[e.jsx("strong",{children:" Benefits:"})," Works with Square, Clover, Toast, Shopify POS, or any system  No monthly integration fees  Staff names tracked  Instant setup"]})})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:a,disabled:!s.storeName,className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ns,{className:"w-4 h-4"}),"Save Store Settings"]})}),s.isConfigured&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Current Configuration"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Store:"})," ",s.storeName]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Integration:"})," Manual Copy/Paste (Universal)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:"text-green-600 font-medium ml-1",children:"Ready for Staff Use"})]})]})]})]})]})},$o=({orders:n})=>{const[t,s]=C.useState(null),[r,a]=C.useState(""),[i,o]=C.useState(!1),l=n.filter(m=>m.name.toLowerCase().includes(r.toLowerCase())),c=m=>{s(m),o(!1),a("")},h=()=>{s(null)},d=m=>{const w=[];return w.push("=".repeat(50)),w.push(`ORDER: ${m.name}`),w.push(`DATE: ${m.date.toLocaleDateString()} ${m.date.toLocaleTimeString()}`),w.push(`ORDER ID: #${m.id}`),m.staffName&&w.push(`STAFF: ${m.staffName}${m.staffId?` (ID: ${m.staffId})`:""}`),w.push("=".repeat(50)),w.push(""),m.notes&&(w.push("NOTES:"),w.push(m.notes),w.push("")),w.push("ITEMS:"),w.push("-".repeat(50)),m.products.forEach((y,b)=>{const T=y.wholesaleCost*2.5,k=y.wholesaleCost*y.quantity,E=T*y.quantity,U=E-k;w.push(`${b+1}. ${y.name} (${y.type})`),w.push(`   Qty: ${y.quantity} | Wholesale: $${y.wholesaleCost.toFixed(2)} each`),w.push(`   Retail: $${T.toFixed(2)} each | Total: $${E.toFixed(2)}`),w.push(`   Item Profit: $${U.toFixed(2)}`),w.push("")}),w.push("-".repeat(50)),w.push("FINANCIAL SUMMARY:"),w.push(`Total Items: ${m.products.reduce((y,b)=>y+b.quantity,0)}`),w.push(`Total Wholesale Cost: $${m.totalWholesale.toFixed(2)}`),w.push(`Total Retail Price: $${m.totalRetail.toFixed(2)}`),w.push(`Total Profit: $${m.profit.toFixed(2)}`),w.push(`Profit Margin: ${(m.profit/m.totalRetail*100).toFixed(1)}%`),w.push("=".repeat(50)),w.join(`
`)},u=()=>g(H,null,function*(){if(!t)return;const m=d(t);try{yield navigator.clipboard.writeText(m),alert("Order details copied to clipboard! You can now paste this into your POS system.")}catch(w){const y=document.createElement("textarea");y.value=m,document.body.appendChild(y),y.select(),document.execCommand("copy"),document.body.removeChild(y),alert("Order details copied to clipboard! You can now paste this into your POS system.")}}),x=()=>{if(!t)return;const m=d(t),w=new Blob([m],{type:"text/plain"}),y=URL.createObjectURL(w),b=document.createElement("a");b.href=y,b.download=`${t.name.replace(/[^a-z0-9]/gi,"_")}_order_record.txt`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y)},v=m=>{switch(m){case"stem":return"bg-green-100 text-green-800";case"vase":return"bg-blue-100 text-blue-800";case"accessory":return"bg-purple-100 text-purple-800";case"other":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"POS Order View"})]}),t&&e.jsxs("button",{onClick:h,className:"text-gray-500 hover:text-gray-700 flex items-center gap-1 text-sm",children:[e.jsx(pt,{className:"w-4 h-4"}),"Clear"]})]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Order Date: ",t.date.toLocaleDateString()," at ",t.date.toLocaleTimeString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Order ID: #",t.id]}),t.staffName&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Staff: ",t.staffName,t.staffId&&` (ID: ${t.staffId})`]})]}),t.photo&&e.jsx("div",{className:"ml-6",children:e.jsx("img",{src:t.photo,alt:t.name,className:"w-32 h-32 object-cover rounded-lg shadow-md"})})]}),t.notes&&e.jsxs("div",{className:"bg-white rounded-md p-3 mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-1",children:"Order Notes"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.notes})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:e.jsx(Ie,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Wholesale Cost"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700",children:["$",t.totalWholesale.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(He,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Retail Price"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:["$",t.totalRetail.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(me,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Profit"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:["$",t.profit.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[(t.profit/t.totalRetail*100).toFixed(1),"% margin"]})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Order Items (",t.products.length," items)"]}),e.jsx("div",{className:"space-y-3",children:t.products.map((m,w)=>{const y=m.wholesaleCost*2.5,b=m.wholesaleCost*m.quantity,T=y*m.quantity,k=T-b;return e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium text-gray-600",children:m.quantity}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800",children:m.name}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${v(m.type)}`,children:m.type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["$",T.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["$",y.toFixed(2)," each"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm bg-gray-50 rounded-md p-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Wholesale:"}),e.jsxs("div",{className:"font-medium",children:["$",b.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Retail:"}),e.jsxs("div",{className:"font-medium text-green-600",children:["$",T.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Profit:"}),e.jsxs("div",{className:"font-medium text-blue-600",children:["$",k.toFixed(2)]})]})]})]},w)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 pt-4 border-t",children:[e.jsxs("button",{onClick:u,className:"bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),"Copy for POS"]}),e.jsxs("button",{onClick:x,className:"bg-orange-600 text-white py-2 px-4 rounded-md hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ua,{className:"w-4 h-4"}),"Download Text"]}),e.jsxs("button",{onClick:()=>window.print(),className:"bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Load Different Order"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx(At,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"Upload Saved Order"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Select a saved order to view in POS format"}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(At,{className:"w-4 h-4"}),"Select Order"]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Select Order to Upload"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsx("input",{type:"text",value:r,onChange:m=>a(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Search orders..."})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-96",children:l.length>0?e.jsx("div",{className:"space-y-3",children:l.map(m=>e.jsx("div",{onClick:()=>c(m),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:m.name}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[m.date.toLocaleDateString(),"  ",m.products.length," items"]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["$",m.totalRetail.toFixed(2),"  Profit: $",m.profit.toFixed(2)]})]}),m.photo&&e.jsx("img",{src:m.photo,alt:m.name,className:"w-12 h-12 object-cover rounded-md ml-3"})]})},m.id))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No orders found"})})})]})})]})]})},Ao=[{id:"template-1",name:"Red Roses",wholesaleCost:3.5,type:"stem",lastUsed:"2024-01-15T10:30:00.000Z",inventoryCount:48,lowStockThreshold:20},{id:"template-2",name:"White Roses",wholesaleCost:3.75,type:"stem",lastUsed:"2024-01-14T14:20:00.000Z",inventoryCount:32,lowStockThreshold:20},{id:"template-3",name:"Baby's Breath",wholesaleCost:2.25,type:"stem",lastUsed:"2024-01-16T09:15:00.000Z",inventoryCount:15,lowStockThreshold:10},{id:"template-4",name:"Eucalyptus",wholesaleCost:1.8,type:"stem",lastUsed:"2024-01-13T16:45:00.000Z",inventoryCount:25,lowStockThreshold:15},{id:"template-5",name:"Glass Cylinder Vase",wholesaleCost:8.5,type:"vase",lastUsed:"2024-01-15T11:00:00.000Z",inventoryCount:12,lowStockThreshold:5},{id:"template-6",name:"Ceramic Pot",wholesaleCost:12,type:"vase",lastUsed:"2024-01-12T13:30:00.000Z",inventoryCount:8,lowStockThreshold:5},{id:"template-7",name:"Satin Ribbon",wholesaleCost:1.25,type:"accessory",lastUsed:"2024-01-16T15:20:00.000Z",inventoryCount:50,lowStockThreshold:10},{id:"template-8",name:"Floral Foam",wholesaleCost:2.5,type:"other",lastUsed:"2024-01-14T08:45:00.000Z",inventoryCount:3,lowStockThreshold:5},{id:"template-9",name:"Pink Carnations",wholesaleCost:2.1,type:"stem",lastUsed:"2024-01-15T12:15:00.000Z",inventoryCount:0,lowStockThreshold:15},{id:"template-10",name:"Sunflowers",wholesaleCost:4.25,type:"stem",lastUsed:"2024-01-16T10:30:00.000Z",inventoryCount:18,lowStockThreshold:12}],Ro={stem:2.5,vase:2,accessory:3,other:2},Io=[{id:"order-1",name:"Valentine's Day Bouquet - Johnson",date:"2024-01-15T14:30:00.000Z",products:[{id:"product-1",name:"Red Roses",wholesaleCost:3.5,quantity:12,type:"stem"},{id:"product-2",name:"Baby's Breath",wholesaleCost:2.25,quantity:3,type:"stem"},{id:"product-3",name:"Glass Cylinder Vase",wholesaleCost:8.5,quantity:1,type:"vase"},{id:"product-4",name:"Satin Ribbon",wholesaleCost:1.25,quantity:1,type:"accessory"}],totalWholesale:59.25,totalRetail:127.5,profit:68.25,notes:"Customer requested deep red roses, extra full arrangement"},{id:"order-2",name:"Sympathy Arrangement - Williams",date:"2024-01-14T09:15:00.000Z",products:[{id:"product-5",name:"White Roses",wholesaleCost:3.75,quantity:8,type:"stem"},{id:"product-6",name:"Eucalyptus",wholesaleCost:1.8,quantity:5,type:"stem"},{id:"product-7",name:"Ceramic Pot",wholesaleCost:12,quantity:1,type:"vase"},{id:"product-8",name:"Floral Foam",wholesaleCost:2.5,quantity:1,type:"other"}],totalWholesale:53.5,totalRetail:113.5,profit:60,notes:"Delivered to funeral home, white and green theme"},{id:"order-3",name:"Birthday Centerpiece - Davis",date:"2024-01-16T11:45:00.000Z",products:[{id:"product-9",name:"Sunflowers",wholesaleCost:4.25,quantity:6,type:"stem"},{id:"product-10",name:"Pink Carnations",wholesaleCost:2.1,quantity:8,type:"stem"},{id:"product-11",name:"Glass Cylinder Vase",wholesaleCost:8.5,quantity:1,type:"vase"}],totalWholesale:50.3,totalRetail:104.25,profit:53.95,notes:"Bright and cheerful for 50th birthday party"}],Uo=[{id:"recipe-1",name:"Classic Rose Bouquet",description:"Elegant dozen red roses with baby's breath and greenery",websitePrice:89.99,ingredients:[{name:"Red Roses",quantity:12,type:"stem",notes:"Premium grade"},{name:"Baby's Breath",quantity:3,type:"stem"},{name:"Eucalyptus",quantity:2,type:"stem"},{name:"Satin Ribbon",quantity:1,type:"accessory"}],lastUpdated:"2024-01-15T16:00:00.000Z",websiteUrl:"https://yourflowershop.com/classic-rose-bouquet"},{id:"recipe-2",name:"Sunny Day Arrangement",description:"Bright sunflowers with colorful carnations in ceramic pot",websitePrice:65.99,ingredients:[{name:"Sunflowers",quantity:4,type:"stem"},{name:"Pink Carnations",quantity:6,type:"stem"},{name:"Ceramic Pot",quantity:1,type:"vase"},{name:"Floral Foam",quantity:1,type:"other"}],lastUpdated:"2024-01-16T12:30:00.000Z"},{id:"recipe-3",name:"Peaceful Memories",description:"Serene white roses with eucalyptus in elegant vase",websitePrice:75.99,ingredients:[{name:"White Roses",quantity:8,type:"stem"},{name:"Eucalyptus",quantity:4,type:"stem"},{name:"Glass Cylinder Vase",quantity:1,type:"vase"}],lastUpdated:"2024-01-14T14:15:00.000Z",websiteUrl:"https://yourflowershop.com/peaceful-memories"}],Do="2024-01-17T10:00:00.000Z",Lo="1.0",Oe={templates:Ao,markupSettings:Ro,savedOrders:Io,arrangementRecipes:Uo,exportDate:Do,version:Lo},Mo=n=>{const[t,s]=C.useState(null),[r,a]=C.useState([]),[i,o]=C.useState({stem:2.5,vase:2,accessory:3,other:2}),[l,c]=C.useState([]),[h,d]=C.useState([]),[u,x]=C.useState({storeName:"",isConfigured:!1}),[v,m]=C.useState(!0),[w,y]=C.useState(null),b=()=>g(H,null,function*(){if(n)try{const{data:p,error:f}=yield G.from("profiles").select("*").eq("id",n).single();if(f)throw f;s(p)}catch(p){console.error("Error loading profile:",p),y(p.message)}}),T=()=>g(H,null,function*(){if(n)try{const{data:p,error:f}=yield G.from("product_templates").select("*").eq("user_id",n).order("last_used",{ascending:!1});if(f)throw f;const j=p.map(_=>({id:_.id,name:_.name,wholesaleCost:Number(_.wholesale_cost),type:_.type,lastUsed:new Date(_.last_used),inventoryCount:_.inventory_count!==null?_.inventory_count:void 0,lowStockThreshold:_.low_stock_threshold!==null?_.low_stock_threshold:void 0}));a(j)}catch(p){console.error("Error loading product templates:",p),y(p.message)}}),k=()=>g(H,null,function*(){if(n)try{const{data:p,error:f}=yield G.from("markup_settings").select("*").eq("user_id",n).maybeSingle();if(f){if(f.code==="PGRST116"||!p){o({stem:2.5,vase:2,accessory:3,other:2});return}throw f}p&&o({stem:Number(p.stem),vase:Number(p.vase),accessory:Number(p.accessory),other:Number(p.other)})}catch(p){console.error("Error loading markup settings:",p),y(p.message)}}),E=()=>g(H,null,function*(){if(n)try{const{data:p,error:f}=yield G.from("orders").select(`
          *,
          order_products (*)
        `).eq("user_id",n).order("created_at",{ascending:!1});if(f)throw f;const j=p.map(_=>({id:_.id,name:_.name,date:new Date(_.created_at),products:_.order_products.map($=>({id:$.id,name:$.name,wholesaleCost:Number($.wholesale_cost),quantity:$.quantity,type:$.type})),totalWholesale:Number(_.total_wholesale),totalRetail:Number(_.total_retail),profit:Number(_.profit),photo:_.photo||void 0,notes:_.notes||void 0,staffName:_.staff_name||void 0,staffId:_.staff_id||void 0}));c(j)}catch(p){console.error("Error loading saved orders:",p),y(p.message)}}),U=()=>g(H,null,function*(){if(n)try{const{data:p,error:f}=yield G.from("arrangement_recipes").select(`
          *,
          recipe_ingredients (*)
        `).eq("user_id",n).order("updated_at",{ascending:!1});if(f)throw f;const j=p.map(_=>({id:_.id,name:_.name,description:_.description||void 0,websitePrice:Number(_.website_price),websiteUrl:_.website_url||void 0,photo:_.photo||void 0,ingredients:_.recipe_ingredients.map($=>({name:$.name,quantity:$.quantity,type:$.type,notes:$.notes||void 0})),lastUpdated:new Date(_.updated_at)}));d(j)}catch(p){console.error("Error loading arrangement recipes:",p),y(p.message)}}),M=()=>g(H,null,function*(){if(n)try{const{data:p,error:f}=yield G.from("pos_settings").select("*").eq("user_id",n).maybeSingle();if(f){if(f.code==="PGRST116"||!p){x({storeName:"",isConfigured:!1});return}throw f}p&&x({storeName:p.store_name,isConfigured:p.is_configured})}catch(p){console.error("Error loading POS settings:",p),y(p.message)}}),R=()=>g(H,null,function*(){if(!n){console.log("Demo mode: Loading sample data...");try{const p=localStorage.getItem("demo_product_templates");if(p){const j=JSON.parse(p).map(_=>O(P({},_),{lastUsed:new Date(_.lastUsed),inventoryCount:_.inventoryCount!==void 0?_.inventoryCount:void 0,lowStockThreshold:_.lowStockThreshold!==void 0?_.lowStockThreshold:void 0}));a(j),console.log("Demo mode: Loaded product templates from localStorage:",j.length)}else a(Oe.templates.map(f=>O(P({},f),{lastUsed:new Date(f.lastUsed)}))),console.log("Demo mode: Using default product templates from sample data")}catch(p){console.error("Error loading demo product templates from localStorage:",p),a(Oe.templates.map(f=>O(P({},f),{lastUsed:new Date(f.lastUsed)})))}try{const p=localStorage.getItem("demo_markup_settings");if(p){const f=JSON.parse(p);o(f),console.log("Demo mode: Loaded markup settings from localStorage:",f)}else o(Oe.markupSettings),console.log("Demo mode: Using default markup settings from sample data")}catch(p){console.error("Error loading demo markup settings from localStorage:",p),o(Oe.markupSettings)}try{const p=localStorage.getItem("demo_saved_orders");if(p){const f=JSON.parse(p);c(f.map(j=>O(P({},j),{date:new Date(j.date),products:j.products.map(_=>O(P({},_),{wholesaleCost:Number(_.wholesaleCost)}))}))),console.log("Demo mode: Loaded saved orders from localStorage:",f.length)}else c(Oe.savedOrders.map(f=>O(P({},f),{date:new Date(f.date),products:f.products.map(j=>O(P({},j),{wholesaleCost:Number(j.wholesaleCost)}))}))),console.log("Demo mode: Using default saved orders from sample data")}catch(p){console.error("Error loading demo saved orders from localStorage:",p),c(Oe.savedOrders.map(f=>O(P({},f),{date:new Date(f.date),products:f.products.map(j=>O(P({},j),{wholesaleCost:Number(j.wholesaleCost)}))})))}d(Oe.arrangementRecipes.map(p=>O(P({},p),{lastUpdated:new Date(p.lastUpdated),websitePrice:Number(p.websitePrice)})));try{const p=localStorage.getItem("demo_pos_settings");if(p){const f=JSON.parse(p);x(f),console.log("Demo mode: Loaded POS settings from localStorage:",f)}}catch(p){console.error("Error loading demo POS settings from localStorage:",p)}m(!1);return}m(!0),y(null);try{yield Promise.all([b(),T(),k(),E(),U(),M()])}catch(p){console.error("Error loading data:",p),y(p.message)}finally{m(!1)}}),ae=p=>g(H,null,function*(){if(!n){const f={id:`demo-${Date.now()}`,name:p.name,wholesaleCost:p.wholesaleCost,type:p.type,lastUsed:p.lastUsed,inventoryCount:p.inventoryCount,lowStockThreshold:p.lowStockThreshold};a(j=>[f,...j]);try{const j=[f,...r];localStorage.setItem("demo_product_templates",JSON.stringify(j)),console.log("Demo mode: Product templates saved to localStorage")}catch(j){console.error("Error saving product templates to localStorage:",j)}return f}try{const{data:f,error:j}=yield G.from("product_templates").insert({user_id:n,name:p.name,wholesale_cost:p.wholesaleCost,type:p.type,last_used:p.lastUsed.toISOString(),inventory_count:p.inventoryCount!==void 0?p.inventoryCount:null,low_stock_threshold:p.lowStockThreshold!==void 0?p.lowStockThreshold:null}).select().single();if(j)throw j;const _={id:f.id,name:f.name,wholesaleCost:Number(f.wholesale_cost),type:f.type,lastUsed:new Date(f.last_used),inventoryCount:f.inventory_count!==null?f.inventory_count:void 0,lowStockThreshold:f.low_stock_threshold!==null?f.low_stock_threshold:void 0};return a($=>[_,...$]),_}catch(f){throw console.error("Error saving product template:",f),f}}),ee=(p,f)=>g(H,null,function*(){if(!n){a(j=>{const _=j.map($=>$.id===p?P(P({},$),f):$);try{localStorage.setItem("demo_product_templates",JSON.stringify(_)),console.log("Demo mode: Product templates updated in localStorage")}catch($){console.error("Error updating product templates in localStorage:",$)}return _});return}try{const j={};f.name!==void 0&&(j.name=f.name),f.wholesaleCost!==void 0&&(j.wholesale_cost=f.wholesaleCost),f.type!==void 0&&(j.type=f.type),f.lastUsed!==void 0&&(j.last_used=f.lastUsed.toISOString()),"inventoryCount"in f&&f.inventoryCount!==void 0&&(j.inventory_count=f.inventoryCount),"lowStockThreshold"in f&&f.lowStockThreshold!==void 0&&(j.low_stock_threshold=f.lowStockThreshold),console.log("Updating product template:",p,"with data:",j);const{data:_,error:$}=yield G.from("product_templates").update(j).eq("id",p).eq("user_id",n).select().single();if($)throw $;console.log("Update successful, new data:",_);const W={id:_.id,name:_.name,wholesaleCost:Number(_.wholesale_cost),type:_.type,lastUsed:new Date(_.last_used),inventoryCount:_.inventory_count!==null?_.inventory_count:void 0,lowStockThreshold:_.low_stock_threshold!==null?_.low_stock_threshold:void 0};a(z=>z.map(te=>te.id===p?W:te))}catch(j){throw console.error("Error updating product template:",j),j}}),ge=p=>g(H,null,function*(){if(!n){const f=r.filter(j=>j.id!==p);a(f);try{localStorage.setItem("demo_product_templates",JSON.stringify(f)),console.log("Demo mode: Product template deleted from localStorage")}catch(j){console.error("Error deleting product template from localStorage:",j)}return}try{const{error:f}=yield G.from("product_templates").delete().eq("id",p).eq("user_id",n);if(f)throw f;a(j=>j.filter(_=>_.id!==p))}catch(f){throw console.error("Error deleting product template:",f),f}}),we=p=>g(H,null,function*(){if(!n){console.log("Demo mode: Saving markup settings to local state:",p),o(p);try{localStorage.setItem("demo_markup_settings",JSON.stringify(p)),console.log("Demo mode: Markup settings saved to localStorage successfully")}catch(f){console.error("Error saving markup settings to localStorage:",f)}return}try{const{error:f}=yield G.from("markup_settings").upsert({user_id:n,stem:p.stem,vase:p.vase,accessory:p.accessory,other:p.other});if(f)throw f;o(p)}catch(f){throw console.error("Error saving markup settings:",f),f}}),de=p=>g(H,null,function*(){if(!n){const f=O(P({},p),{id:`demo-order-${Date.now()}`,date:new Date});console.log("Demo mode: Saving order to local state:",f),c(j=>[f,...j]),console.log("Demo mode: Order saved successfully"),yield je(f);try{const j=[f,...l];localStorage.setItem("demo_saved_orders",JSON.stringify(j)),console.log("Demo mode: Saved orders updated in localStorage")}catch(j){console.error("Error saving orders to localStorage:",j)}return f}try{const{data:f,error:j}=yield G.from("orders").insert({user_id:n,name:p.name,total_wholesale:p.totalWholesale,total_retail:p.totalRetail,profit:p.profit,photo:p.photo,notes:p.notes,staff_name:p.staffName,staff_id:p.staffId}).select().single();if(j)throw j;const _=p.products.map(z=>({order_id:f.id,name:z.name,wholesale_cost:z.wholesaleCost,quantity:z.quantity,type:z.type})),{error:$}=yield G.from("order_products").insert(_);if($)throw $;const W=O(P({},p),{id:f.id,date:new Date(f.created_at)});return c(z=>[W,...z]),yield je(W),W}catch(f){throw console.error("Error saving order:",f),f}}),je=p=>g(H,null,function*(){const f=[];if(a(j=>j.map(_=>{const $=p.products.find(W=>W.name===_.name&&W.type===_.type);if($&&_.inventoryCount!==void 0){const W=Math.max(0,_.inventoryCount-$.quantity),z=O(P({},_),{inventoryCount:W});return f.push(z),z}return _})),n&&f.length>0)try{for(const j of f){const{error:_}=yield G.from("product_templates").update({inventory_count:j.inventoryCount}).eq("id",j.id).eq("user_id",n);_&&console.error("Error updating inventory in database:",_)}console.log("Inventory updated in database for",f.length,"products")}catch(j){console.error("Error updating inventory in database:",j)}if(!n)try{const j=r.map(_=>{const $=p.products.find(W=>W.name===_.name&&W.type===_.type);if($&&_.inventoryCount!==void 0){const W=Math.max(0,_.inventoryCount-$.quantity);return O(P({},_),{inventoryCount:W})}return _});localStorage.setItem("demo_product_templates",JSON.stringify(j))}catch(j){console.error("Error updating inventory in localStorage:",j)}}),fe=p=>g(H,null,function*(){if(!n){const f=l.filter(j=>j.id!==p);c(f);try{localStorage.setItem("demo_saved_orders",JSON.stringify(f)),console.log("Demo mode: Order deleted from localStorage")}catch(j){console.error("Error deleting order from localStorage:",j)}return}try{const{error:f}=yield G.from("orders").delete().eq("id",p).eq("user_id",n);if(f)throw f;c(j=>j.filter(_=>_.id!==p))}catch(f){throw console.error("Error deleting order:",f),f}}),he=p=>g(H,null,function*(){if(n)try{const{data:f,error:j}=yield G.from("arrangement_recipes").insert({user_id:n,name:p.name,description:p.description,website_price:p.websitePrice,website_url:p.websiteUrl,photo:p.photo}).select().single();if(j)throw j;const _=p.ingredients.map(z=>({recipe_id:f.id,name:z.name,quantity:z.quantity,type:z.type,notes:z.notes})),{error:$}=yield G.from("recipe_ingredients").insert(_);if($)throw $;const W=O(P({},p),{id:f.id,lastUpdated:new Date(f.updated_at)});return d(z=>[W,...z]),W}catch(f){throw console.error("Error saving arrangement recipe:",f),f}}),N=(p,f)=>g(H,null,function*(){if(n)try{const j={};f.name&&(j.name=f.name),f.description!==void 0&&(j.description=f.description),f.websitePrice!==void 0&&(j.website_price=f.websitePrice),f.websiteUrl!==void 0&&(j.website_url=f.websiteUrl),f.photo!==void 0&&(j.photo=f.photo);const{error:_}=yield G.from("arrangement_recipes").update(j).eq("id",p).eq("user_id",n);if(_)throw _;if(f.ingredients){const{error:$}=yield G.from("recipe_ingredients").delete().eq("recipe_id",p);if($)throw $;const W=f.ingredients.map(te=>({recipe_id:p,name:te.name,quantity:te.quantity,type:te.type,notes:te.notes})),{error:z}=yield G.from("recipe_ingredients").insert(W);if(z)throw z}d($=>$.map(W=>W.id===p?O(P(P({},W),f),{lastUpdated:new Date}):W))}catch(j){throw console.error("Error updating arrangement recipe:",j),j}}),L=p=>g(H,null,function*(){if(n)try{const{error:f}=yield G.from("arrangement_recipes").delete().eq("id",p).eq("user_id",n);if(f)throw f;d(j=>j.filter(_=>_.id!==p))}catch(f){throw console.error("Error deleting arrangement recipe:",f),f}}),B=p=>g(H,null,function*(){if(!n){console.log("Demo mode: Saving POS settings to local state:",p),x(p);try{localStorage.setItem("demo_pos_settings",JSON.stringify(p)),console.log("Demo mode: POS settings saved to localStorage successfully")}catch(f){console.error("Error saving to localStorage:",f)}return}try{const{error:f}=yield G.from("pos_settings").upsert({user_id:n,store_name:p.storeName,is_configured:p.isConfigured});if(f)throw f;x(p),console.log("Authenticated mode: POS settings saved to Supabase successfully")}catch(f){throw console.error("Error saving POS settings:",f),f}});return C.useEffect(()=>{if(!n)try{const p=localStorage.getItem("demo_pos_settings");if(p){const j=JSON.parse(p);x(j),console.log("Demo mode: Loaded POS settings from localStorage:",j)}const f=localStorage.getItem("demo_markup_settings");if(f){const j=JSON.parse(f);o(j),console.log("Demo mode: Loaded markup settings from localStorage:",j)}}catch(p){console.error("Error loading demo settings from localStorage:",p)}R()},[n]),{profile:t,productTemplates:r,markupSettings:i,savedOrders:l,arrangementRecipes:h,posSettings:u,loading:v,error:w,saveProductTemplate:ae,updateProductTemplate:ee,deleteProductTemplate:ge,saveMarkupSettings:we,saveOrder:de,deleteOrder:fe,saveArrangementRecipe:he,updateArrangementRecipe:N,deleteArrangementRecipe:L,savePosSettings:B,loadAllData:R}},Bs=({onClose:n})=>{const[t,s]=C.useState(""),[r,a]=C.useState(""),[i,o]=C.useState(!1),l=c=>g(H,null,function*(){if(c.preventDefault(),!t.trim()||!r.trim()){alert("Please fill in both email and feedback fields.");return}o(!0);try{const{error:h}=yield G.from("beta_feedback").insert({email:t.trim().toLowerCase(),feedback:r.trim(),timestamp:new Date().toISOString()});if(h)throw h;alert("Thank you for your feedback! We really appreciate it."),n()}catch(h){console.error("Feedback submission error:",h),alert("There was an error submitting your feedback. Please try again.")}finally{o(!1)}});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Share Your Feedback"}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Email"}),e.jsx("input",{type:"email",value:t,onChange:c=>s(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Feedback"}),e.jsx("textarea",{value:r,onChange:c=>a(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"What do you think about FlowerCost Pro? Any suggestions or issues?",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Submitting...":"Submit Feedback"}),e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})})};function Bt({error:n,resetErrorBoundary:t}){return e.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We're sorry, but there was an error loading the application."}),e.jsx("button",{onClick:t,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Try again"})]})})}function Fo(){var De;const[n,t]=C.useState("landing"),[s,r]=C.useState(null),[a,i]=C.useState("owner"),[o,l]=C.useState("overview"),[c,h]=C.useState(!1),[d,u]=C.useState(!1),[x,v]=C.useState([]),{profile:m,productTemplates:w,markupSettings:y,savedOrders:b,arrangementRecipes:T,posSettings:k,loading:E,error:U,saveProductTemplate:M,updateProductTemplate:R,deleteProductTemplate:ae,saveMarkupSettings:ee,saveOrder:ge,deleteOrder:we,saveArrangementRecipe:de,updateArrangementRecipe:je,deleteArrangementRecipe:fe,savePosSettings:he}=Mo((s==null?void 0:s.id)||null);C.useEffect(()=>{(()=>g(this,null,function*(){try{const{user:Y}=yield po();Y&&(r(Y),t("dashboard"))}catch(Y){console.error("Error checking user:",Y)}}))();const{data:{subscription:pe}}=G.auth.onAuthStateChange((Y,Le)=>g(this,null,function*(){Y==="SIGNED_IN"&&(Le!=null&&Le.user)?(r(Le.user),t("dashboard")):Y==="SIGNED_OUT"?(r(null),t("landing")):Y==="PASSWORD_RECOVERY"&&(h(!0),t("auth"))}));return()=>pe.unsubscribe()},[]);const N=()=>{console.log("App: handleStartDemo called"),console.log("App: Setting currentView to dashboard and user to demo"),r({id:null,email:"demo@flowercostpro.com"}),t("dashboard"),i("owner"),l("overview"),console.log("App: Demo mode activated")},L=()=>{t("auth"),h(!1)},B=()=>{t("dashboard"),h(!1)},p=()=>{t("landing"),h(!1)},f=()=>g(this,null,function*(){try{yield G.auth.signOut(),r(null),t("landing"),l("overview"),i("owner")}catch(Q){console.error("Logout error:",Q)}}),j=()=>{console.log("App: handleShowFeedback called"),u(!0)},_=Q=>g(this,null,function*(){try{const pe=w.find(Y=>Y.name.toLowerCase()===Q.name.toLowerCase()&&Y.type===Q.type);if(pe){const Y={wholesaleCost:Q.wholesaleCost,lastUsed:new Date};Q.inventoryCount!==void 0&&(Y.inventoryCount=Q.inventoryCount),Q.lowStockThreshold!==void 0&&(Y.lowStockThreshold=Q.lowStockThreshold),yield R(pe.id,Y)}else{const Y={name:Q.name,wholesaleCost:Q.wholesaleCost,type:Q.type,lastUsed:new Date,inventoryCount:Q.inventoryCount,lowStockThreshold:Q.lowStockThreshold};yield M(Y)}}catch(pe){console.error("Error adding product:",pe),alert("Error adding product. Please try again.")}}),$=Q=>{v(Q)},W=((De=s==null?void 0:s.user_metadata)==null?void 0:De.full_name)||(m==null?void 0:m.full_name)||(s?"User":"Demo User"),z=(m==null?void 0:m.store_name)||(k==null?void 0:k.storeName)||"Demo Flower Shop";if(n==="landing")return e.jsxs(Tt,{FallbackComponent:Bt,children:[e.jsx(xo,{onStartDemo:N,onSignIn:L,onShowFeedback:j}),d&&e.jsx(Bs,{onClose:()=>u(!1)})]});if(n==="auth")return e.jsx(Tt,{FallbackComponent:Bt,children:e.jsx(yo,{onAuthSuccess:B,isPasswordReset:c,onBackToLanding:p})});if(E)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})});if(U)return e.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error Loading Data"}),e.jsx("p",{className:"text-gray-600 mb-4",children:U}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Page"})]})});const te=()=>{switch(o){case"create-order":return e.jsx(jo,{templates:w,recipes:T,markupSettings:y,onSaveOrder:ge,onOrderChange:$,userRole:a,posSettings:k});case"products":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(_o,{onAddProduct:_,existingTemplates:w}),e.jsx(No,{templates:w,markupSettings:y,onUpdateTemplate:R,onDeleteTemplate:ae})]});case"recipes":return e.jsx(Co,{recipes:T,templates:w,markupSettings:y,onSaveRecipe:de,onDeleteRecipe:fe,onUpdateRecipe:je});case"orders":return e.jsx(So,{orders:b,onDeleteOrder:we});case"analytics":return e.jsx(To,{orders:b});case"insights":return e.jsx(Po,{orders:b,templates:w});case"settings":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ko,{markupSettings:y,onMarkupChange:ee}),e.jsx(Eo,{posSettings:k,onUpdateSettings:he})]});case"staff-training":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Oo,{products:x,markupSettings:y,targetBudget:100,userRole:a}),e.jsx($o,{orders:b})]});default:return null}};return e.jsxs(Tt,{FallbackComponent:Bt,children:[e.jsx(bo,{userRole:a,userName:W,storeName:z,onRoleChange:i,activeSection:o,onSectionChange:l,onLogout:f,onShowFeedback:j,children:e.jsx(vo,{activeSection:o,userRole:a,orders:b,templates:w,children:te()})}),d&&e.jsx(Bs,{onClose:()=>u(!1)})]})}Wt.createRoot(document.getElementById("root")).render(e.jsx(kr.StrictMode,{children:e.jsx(Fo,{})}))});export default qo();
